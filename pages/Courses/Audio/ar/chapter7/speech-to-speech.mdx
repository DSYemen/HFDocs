# ุงูุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ููุงู
ุงูุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ููุงู (STST ุฃู S2ST) ูู ูููุฉ ูุนุงูุฌุฉ ุงููุบุฉ ุงูููุทููุฉ ุฌุฏูุฏุฉ ูุณุจููุง. ูุชูุทูู ุนูู ุชุฑุฌูุฉ ุงูููุงู ูู ูุบุฉ ุฅูู ููุงู ุจูุบุฉ ุฃุฎุฑู:

ูููู ุงุนุชุจุงุฑ STST ุงูุชุฏุงุฏูุง ููููุฉ ุงูุชุฑุฌูุฉ ุงูุขููุฉ (MT) ุงูุชูููุฏูุฉ: ุจุฏูุงู ูู ุชุฑุฌูุฉ ุงููุต ูู ูุบุฉ ุฅูู ุฃุฎุฑูุ ูููู ุจุชุฑุฌูุฉ ุงูููุงู ูู ูุบุฉ ุฅูู ุฃุฎุฑู. ุชุชูุชุน STST ุจุชุทุจููุงุช ูู ูุฌุงู ุงูุชูุงุตู ูุชุนุฏุฏ ุงููุบุงุชุ ููุง ููููู ุงููุชุญุฏุซูู ุจูุบุงุช ูุฎุชููุฉ ูู ุงูุชูุงุตู ูุน ุจุนุถูู ุงูุจุนุถ ูู ุฎูุงู ูุณูุท ุงูููุงู.

ูููุชุฑุถ ุฃูู ุชุฑูุฏ ุงูุชูุงุตู ูุน ุดุฎุต ุขุฎุฑ ุนุจุฑ ุญุงุฌุฒ ุงููุบุฉ. ุจุฏูุงู ูู ูุชุงุจุฉ ุงููุนูููุงุช ุงูุชู ุชุฑูุฏ ููููุง ุซู ุชุฑุฌูุชูุง ุฅูู ูุต ุจุงููุบุฉ ุงููุณุชูุฏูุฉุ ููููู ุงูุชุญุฏุซ ุจูุง ูุจุงุดุฑุฉู ูุฃู ูููู ูุธุงู STST ุจุชุญููู ููุงูู ุงูููุทูู ุฅูู ุงููุบุฉ ุงููุณุชูุฏูุฉ. ูููู ูููุณุชูู ุจุนุฏ ุฐูู ุงูุฑุฏ ุนู ุทุฑูู ุงูุชุญุฏุซ ูุฑุฉ ุฃุฎุฑู ุฅูู ูุธุงู STSTุ ูููููู ุงูุงุณุชูุงุน ุฅูู ุฑุฏู. ูุฐู ุทุฑููุฉ ุฃูุซุฑ ุทุจูุนูุฉ ููุชูุงุตู ููุงุฑูุฉ ุจุงูุชุฑุฌูุฉ ุงูุขููุฉ ุงููุงุฆูุฉ ุนูู ุงููุต.

ูู ูุฐุง ุงููุตูุ ุณูุณุชูุดู ููุฌูุง ูุชุชุงูููุง ูู STSTุ ุญูุซ ูุฌูุน ุจูู ุงููุนุฑูุฉ ุงูุชู ุงูุชุณุจุชูุง ูู ุงููุญุฏุฉ 5 ู6 ูู ุงูุฏูุฑุฉ. ุณูุณุชุฎุฏู ูุธุงู ุชุฑุฌูุฉ ุงูููุงู (ST) ููุณุฎ ุงูููุงู ุงููุตุฏุฑ ุฅูู ูุต ูู ุงููุบุฉ ุงููุณุชูุฏูุฉุ ุซู ุงูุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู (TTS) ูุชูููุฏ ุงูููุงู ูู ุงููุบุฉ ุงููุณุชูุฏูุฉ ูู ุงููุต ุงููุชุฑุฌู:

ูููููุง ุฃูุถูุง ุงุณุชุฎุฏุงู ููุฌ ุซูุงุซู ุงููุฑุงุญูุ ุญูุซ ูุณุชุฎุฏู ุฃููุงู ูุธุงู ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู (ASR) ููุณุฎ ุงูููุงู ุงููุตุฏุฑ ุฅูู ูุต ุจููุณ ุงููุบุฉุ ุซู ุงูุชุฑุฌูุฉ ุงูุขููุฉ ูุชุฑุฌูุฉ ุงููุต ุงูููุณูุฎ ุฅูู ุงููุบุฉ ุงููุณุชูุฏูุฉุ ูุฃุฎูุฑูุง ุงูุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู ูุชูููุฏ ุงูููุงู ูู ุงููุบุฉ ุงููุณุชูุฏูุฉ. ููุน ุฐููุ ูุฅู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูููููุงุช ุฅูู ุฎุท ุงูุฃูุงุจูุจ ูุคุฏู ุฅูู ุงูุชุดุงุฑ ุงูุฃุฎุทุงุกุ ุญูุซ ุชุชูุงูู ุงูุฃุฎุทุงุก ุงูุชู ูุชู ุชูุฏูููุง ูู ูุธุงู ูุงุญุฏ ุฃุซูุงุก ูุฑูุฑูุง ุนุจุฑ ุงูุฃูุธูุฉ ุงููุชุจููุฉุ ููุง ุชุฒูุฏ ูู ุฒูู ุงููุตููุ ุญูุซ ูุฌุจ ุฅุฌุฑุงุก ุงูุงุณุชุฏูุงู ููุฒูุฏ ูู ุงูููุงุฐุฌ.

ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูููุฌ ุงููุชุชุงูู ูู STST ุจุณูุท ููุบุงูุฉุ ุฅูุง ุฃูู ูุคุฏู ุฅูู ุฃูุธูุฉ STST ูุนุงูุฉ ููุบุงูุฉ. ุชู ุงุณุชุฎุฏุงู ูุธุงู ุซูุงุซู ุงููุฑุงุญู ูุชุชุงูู ูู ASR + MT + TTS ุณุงุจููุง ูุชุดุบูู ุงูุนุฏูุฏ ูู ุงูููุชุฌุงุช ุงูุชุฌุงุฑูุฉ STSTุ ุจูุง ูู ุฐูู Google Translate. ุฅูู ุฃูุถูุง ุทุฑููุฉ ูุนุงูุฉ ูู ุญูุซ ุงูุจูุงูุงุช ูุงูุญูุณุจุฉ ูุชุทููุฑ ูุธุงู STSTุ ุญูุซ ูููู ุงูุชุฑุงู ุฃูุธูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู ุงูููุฌูุฏุฉ ูุฅูุชุงุฌ ูููุฐุฌ STST ุฌุฏูุฏ ุฏูู ุฃู ุชุฏุฑูุจ ุฅุถุงูู.

ูู ุงูุฌุฒุก ุงููุชุจูู ูู ูุฐู ุงููุญุฏุฉุ ุณูุฑูุฒ ุนูู ุฅูุดุงุก ูุธุงู STST ูููู ุจุชุฑุฌูุฉ ุงูููุงู ูู ุฃู ูุบุฉ X ุฅูู ููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ูููู ุชูุณูุน ูุทุงู ุงูุฃุณุงููุจ ุงููุดูููุฉ ูุฃูุธูุฉ STST ุงูุชู ุชุชุฑุฌู ูู ุฃู ูุบุฉ X ุฅูู ุฃู ูุบุฉ Yุ ูููููุง ูุชุฑู ุฐูู ูุชูุฏูุฏ ูููุงุฑุฆ ูููุฏู ูุคุดุฑุงุช ุญูุซูุง ููุทุจู ุฐูู. ูููู ุจุชูุณูู ูููุฉ STST ุฃูุซุฑ ุฅูู ููููููุง ุงููููููู: ST ูTTS. ุณูููู ุฐูู ุนู ุทุฑูู ุชุฌููุนูุง ูุนูุง ูุจูุงุก ุนุฑุถ ุชูุถูุญู ูู Gradio ูุนุฑุถ ูุธุงููุง.

## ุชุฑุฌูุฉ ุงูููุงู
ุณูุณุชุฎุฏู ูููุฐุฌ Whisper ููุธุงู ุชุฑุฌูุฉ ุงูููุงู ุงูุฎุงุต ุจูุงุ ูุฃูู ูุงุฏุฑ ุนูู ุงูุชุฑุฌูุฉ ูู ุฃูุซุฑ ูู 96 ูุบุฉ ุฅูู ุงูุฅูุฌููุฒูุฉ. ุนูู ูุฌู ุงูุชุญุฏูุฏุ ุณูููู ุจุชุญููู ููุทุฉ ุชูุชูุด Whisper Baseุ ูุงูุชู ูุจูุบ ุนุฏุฏ ูุนููุงุชูุง 74 ููููู ูุนููุฉ. ุฅูู ููุณ ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ุฃูุซุฑ ููุงุฐุฌ Whisper ุฃุฏุงุกูุ ุญูุซ ุฃู ุฃูุจุฑ ููุทุฉ ุชูุชูุด Whisper ุฃูุจุฑ ูู 20 ุถุนููุงุ ูููู ูุธุฑูุง ูุฃููุง ูููู ุจุฏูุฌ ูุธุงููู ุชูุจุคููู ุชููุงุฆููุง (ST + TTS)ุ ูุฅููุง ูุฑูุฏ ุงูุชุฃูุฏ ูู ุฃู ูู ูููุฐุฌ ููููู ุงูุชูููุฏ ุจุณุฑุนุฉ ูุณุจูุฉ ุญุชู ูุญุตู ุนูู ุณุฑุนุฉ ุงุณุชุฏูุงู ูุนูููุฉ:

```python
import torch
from transformers import pipeline

device = "cuda:0" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
"automatic-speech-recognition", model="openai/whisper-base", device=device
)
```

ุฑุงุฆุน! ูุงุฎุชุจุงุฑ ูุธุงู STST ุงูุฎุงุต ุจูุงุ ุณูููู ุจุชุญููู ุนููุฉ ุตูุชูุฉ ุจูุบุฉ ุบูุฑ ุงูุฅูุฌููุฒูุฉ. ุฏุนูุง ูุญูู ุงููุซุงู ุงูุฃูู ูู ุงูุดู ุงูุฅูุทุงูู (`it`) ููุฌููุนุฉ ุจูุงูุงุช VoxPopuli:

```python
from datasets import load_dataset

dataset = load_dataset("facebook/voxpopuli", "it", split="validation", streaming=True)
sample = next(iter(dataset))
```

ูุณูุงุน ูุฐู ุงูุนููุฉุ ูููููุง ุชุดุบูููุง ุจุงุณุชุฎุฏุงู ุนุงุฑุถ ุงููุฌููุนุฉ ุนูู Hub: facebook/voxpopuli/viewer

ุฃู ุชุดุบูู ุจุงุณุชุฎุฏุงู ููุฒุฉ ุงูุตูุช ipynb:

```python
from IPython.display import Audio

Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```

ุงูุขู ุฏุนูุง ูุญุฏุฏ ุฏุงูุฉ ุชุฃุฎุฐ ูุฐุง ุงูุฅุฏุฎุงู ุงูุตูุชู ูุชุนูุฏ ุงููุต ุงููุชุฑุฌู. ุณุชุชุฐูุฑ ุฃูู ูุชุนูู ุนูููุง ุชูุฑูุฑ ูุณูุท ุงูุฅูุดุงุก ุงูุฎุงุต ุจุงููููุฉุ ูุชุนูููู ุนูู "ุงูุชุฑุฌูุฉ" ูุถูุงู ููุงู Whisper ุจุฃุฏุงุก ุชุฑุฌูุฉ ุงูููุงู ูููุณ ุงูุชุนุฑู ุนูู ุงูููุงู:

```python
def translate(audio):
outputs = pipe(audio, max_new_tokens=256, generate_kwargs={"task": "translate"})
return outputs["text"]
```

ูููู ุฃูุถูุง "ุฎุฏุงุน" Whisper ูุชุฑุฌูุฉ ุงูููุงู ูู ุฃู ูุบุฉ X ุฅูู ุฃู ูุบุฉ Y. ูู ุจุจุณุงุทุฉ ุจุชุนููู ุงููููุฉ ุนูู "ูุณุฎ" ูุงููุบุฉ ุฅูู ูุบุชู ุงููุณุชูุฏูุฉ ูู ูุณูุทุงุช ุงูุชูููุฏุ ุนูู ุณุจูู ุงููุซุงูุ ุจุงููุณุจุฉ ููุฅุณุจุงููุฉุ ููููู ุชุนููู ูุง ููู:

`generate_kwargs={"task": "transcribe", "language": "es"}`

ุฑุงุฆุน! ุฏุนูุง ูุชุฃูุฏ ุจุณุฑุนุฉ ูู ุฃููุง ูุญุตู ุนูู ูุชูุฌุฉ ูุนูููุฉ ูู ุงููููุฐุฌ:

```python
translate(sample["audio"].copy())
```

```
'ููุณู ูุงูุงุฌุชูุงุนู. ุฃุนุชูุฏ ุฃู ูุฐู ุฎุทูุฉ ูููุฉ ุฌุฏูุง ูู ุจูุงุก ูุณุงุญุฉ ูุงููููุฉ ููุญุฑูุฉ ูุญุฑูุฉ ูุญูุงูุฉ ุงูุญููู.'
```

ุญุณููุง! ุฅุฐุง ูุงุฑูุง ุฐูู ุจุงููุต ุงููุตุฏุฑ:

```python
sample["raw_text"]
```

```
'Penso che questo sia un passo in avanti importante nella costruzione di uno spazio giuridico di libertร di circolazione e di protezione dei diritti per le persone in Europa.'
```

ุณูุฑู ุฃู ุงูุชุฑุฌูุฉ ุชุชูุงุดู ุชูุฑูุจูุง (ููููู ุงูุชุญูู ุงููุฒุฏูุฌ ุจุงุณุชุฎุฏุงู Google Translate)ุ ุจุงุณุชุซูุงุก ุจุถุน ูููุงุช ุฅุถุงููุฉ ูู ุจุฏุงูุฉ ุงููุณุฎุฉ ุงูููุชูุจุฉ ุญูุซ ูุงู ุงููุชุญุฏุซ ูููู ุฌููุชู ุงูุณุงุจูุฉ.

ุจูุฐุง ูููู ูุฏ ุฃููููุง ุงููุตู ุงูุฃูู ูู ุฎุท ุฃูุงุจูุจ STST ุงููุชุชุงูู ูุฏููุงุ ููุถุนูุง ูู ุงูููุงุฑุณุฉ ุงูููุงุฑุงุช ุงูุชู ุงูุชุณุจูุงูุง ูู ุงููุญุฏุฉ 5 ุนูุฏูุง ุชุนูููุง ููููุฉ ุงุณุชุฎุฏุงู ูููุฐุฌ Whisper ููุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ. ุฅุฐุง ููุช ุชุฑูุฏ ูุฑุงุฌุนุฉ ุฃู ูู ุงูุฎุทูุงุช ุงูุชู ุชูุช ุชุบุทูุชูุงุ ูุงูุฑุฃ ุงููุณู ุงูุฎุงุต ุจู [ููุงุฐุฌ ูุณุจูุฉ ุงูุชุฏุฑูุจ ููุชุนุฑู ุนูู ุงูููุงู](../chapter5/asr_models) ูู ุงููุญุฏุฉ 5.

## ุงูุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู
ููุทูู ุงููุตู ุงูุซุงูู ูู ูุธุงู STST ุงููุชุชุงูู ุงูุฎุงุต ุจูุง ุนูู ุฑุณู ุฎุฑูุทุฉ ูู ุงููุต ุงูุฅูุฌููุฒู ุฅูู ุงูููุงู ุงูุฅูุฌููุฒู. ููุฐุงุ ุณูุณุชุฎุฏู ุงููููุฐุฌ ุงููุณุจู ุงูุชุฏุฑูุจ SpeechT5 TTS ููุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ูุง ูุญุชูู ๐ค Transformers ุญุงูููุง ุนูู ุฎุท ุฃูุงุจูุจ TTSุ ูุฐุง ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ุงููููุฐุฌ ูุจุงุดุฑุฉ ุจุฃููุณูุง. ูุฐุง ููุณ ุจุงูุฃูุฑ ุงููุจูุฑุ ูุฃูุช ุฌููุนูุง ุฎุจุฑุงุก ูู ุงุณุชุฎุฏุงู ุงููููุฐุฌ ููุงุณุชุฏูุงู ุจุนุฏ ุงููุญุฏุฉ 6!

ุฃููุงูุ ุฏุนูุง ูููู ุจุชุญููู ูุนุงูุฌ SpeechT5 ูุงููููุฐุฌ ููููุฏ ุงูุตูุช ูู ููุทุฉ ุงูุชูุชูุด ุงููุณุจูุฉ ุงูุชุฏุฑูุจ:

```python
from transformers import SpeechT5Processor, SpeechT5ForTextToSpeech, SpeechT5HifiGan

processor = SpeechT5Processor.from_pretrained("microsoft/speecht5_tts")

model = SpeechT5ForTextToSpeech.from_pretrained("microsoft/speecht5_tts")
vocoder = SpeechT5HifiGan.from_pretrained("microsoft/speecht5_hifigan")
```

ูุณุชุฎุฏู ููุง ููุทุฉ ุชูุชูุด SpeechT5 ุงููุฏุฑุจุฉ ุฎุตูุตูุง ููุชุฑุฌูุฉ ูู ูุต ุฅูู ููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุชุฑุฌูุฉ ุฅูู ูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ ููู ุฅูุง ุจุงูุชุจุฏูู ุฅูู ููุทุฉ ุชูุชูุด SpeechT5 TTS ุงููุฏุฑุจุฉ ุนูู ูุบุฉ ุงุฎุชูุงุฑูุ ุฃู ุงุณุชุฎุฏู ููุทุฉ ุชูุชูุด MMS TTS ูุณุจูุฉ ุงูุชุฏุฑูุจ ุจูุบุชู ุงููุณุชูุฏูุฉ.

ููุง ูู ุงูุญุงู ูุน ูููุฐุฌ Whisperุ ุณูุถุน ูููุฐุฌ SpeechT5 ููููุฏ ุงูุตูุช ุนูู ุฌูุงุฒ ุงูุชุณุฑูุน GPU ุงูุฎุงุต ุจูุง ุฅุฐุง ูุงู ูุฏููุง ูุงุญุฏ:

```python
model.to(device)
vocoder.to(device)
```

ุฑุงุฆุน! ุฏุนูุง ูุญูู ุงูุขู ุชุถููู ุงููุชุญุฏุซ:

```python
embeddings_dataset = load_dataset("Matthijs/cmu-arctic-xvectors", split="validation")
speaker_embeddings = torch.tensor(embeddings_dataset[7306]["xvector"]).unsqueeze(0)
```

ุงูุขู ูููููุง ูุชุงุจุฉ ุฏุงูุฉ ุชุฃุฎุฐ ูุฅุฏุฎุงู ููุฌู ูุตูุ ูุชููุฏ ุงูููุงู ุงูููุงุจู. ุณูููู ุฃููุงู ุจูุนุงูุฌุฉ ุฅุฏุฎุงู ุงููุต ุจุงุณุชุฎุฏุงู ูุนุงูุฌ SpeechT5ุ ูุชูุณูู ุงููุต ููุญุตูู ุนูู ูุนุฑูุงุช ุงูุฅุฏุฎุงู ุงูุฎุงุตุฉ ุจูุง. ุจุนุฏ ุฐููุ ุณููุฑุฑ ูุนุฑูุงุช ุงูุฅุฏุฎุงู ูุชุถููู ุงููุชุญุฏุซ ุฅูู ูููุฐุฌ SpeechT5ุ ููุถุน ูู ููููุง ุนูู ุฌูุงุฒ ุงูุชุณุฑูุน ุฅุฐุง ูุงู ูุชุงุญูุง. ุฃุฎูุฑูุงุ ุณูุนูุฏ ุงูููุงู ุงููููุฏุ ููุนูุฏู ุฅูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุญุชู ูุชููู ูู ุชุดุบููู ูุฑุฉ ุฃุฎุฑู ูู ุฏูุชุฑ ููุงุญุธุงุช ipynb ุงูุฎุงุต ุจูุง:

```python
def synthesise(text):
inputs = processor(text=text, return_tensors="pt")
speech = model.generate_speech(
inputs["input_ids"].to(device), speaker_embeddings.to(device), vocoder=vocoder
)
return speech.cpu()
```

ุฏุนูุง ูุชุฃูุฏ ูู ุฃูู ูุนูู ุจุฅุฏุฎุงู ูุต ูููู:

```python
speech = synthesise("Hey there! This is a test!")

Audio(speech, rate=16000)
```

ูุจุฏู ุฌูุฏูุง! ุงูุขู ููุฌุฒุก ุงููุซูุฑ - ุชุฌููุน ูู ุดูุก ูุนูุง.

## ุฅูุดุงุก ุนุฑุถ ุชูุถูุญู ูู STST
ูุจู ุฅูุดุงุก ุนุฑุถ ุชูุถูุญู ูู [Gradio](https://gradio.app) ูุนุฑุถ ูุธุงู STST ุงูุฎุงุต ุจูุงุ ุฏุนูุง ูููู ุฃููุงู ุจูุญุต ุณุฑูุน ููุชุฃูุฏ ูู ุฃููุง ูููููุง ุฏูุฌ ุงููููุฐุฌููุ ููุถุน ุนููุฉ ุตูุชูุฉ ูุงูุญุตูู ุนูู ุนููุฉ ุตูุชูุฉ. ุณููุนู ุฐูู ุนู ุทุฑูู ุฏูุฌ ุงูุฏุงูุชูู ุงููุชูู ุญุฏุฏูุงููุง ูู ุงููุณููู ุงููุฑุนููู ุงูุณุงุจูููุ ุจุญูุซ ูููู ุจุฅุฏุฎุงู ุงูุตูุช ุงููุตุฏุฑ ูุงุณุชุฑุฏุงุฏ ุงููุต ุงููุชุฑุฌูุ ุซู ูููู ุจุชุฑููุจ ุงููุต ุงููุชุฑุฌู ููุญุตูู ุนูู ุงูููุงู ุงููุชุฑุฌู. ุฃุฎูุฑูุงุ ุณูููู ุจุชุญููู ุงูููุงู ุงููููููุฏ ุฅูู ูุตูููุฉ `int16`ุ ููู ุชูุณูู ููู ุงูุฅุฎุฑุงุฌ ุงูุตูุชู ุงูุฐู ูุชููุนู Gradio. ููููุงู ุจุฐููุ ูุฌุจ ุนูููุง ุฃููุงู ุชุทุจูุน ูุตูููุฉ ุงูุตูุช ุจูุงุณุทุฉ ุงููุทุงู ุงูุฏููุงูููู ูููุน ุงูุจูุงูุงุช ุงููุณุชูุฏู (`int16`)ุ ุซู ุชุญูููู ูู ููุน ุจูุงูุงุช NumPy ุงูุงูุชุฑุงุถู (`float64`) ุฅูู ููุน ุงูุจูุงูุงุช ุงููุณุชูุฏู (`int16`):

```python
import numpy as np

target_dtype = np.int16
max_range = np.iinfo(target_dtype).max


def speech_to_speech_translation(audio):
translated_text = translate(audio)
synthesised_speech = synthesise(translated_text)
synthesised_speech = (synthesised_speech.numpy() * max_range).astype(np.int16)
return 16000, synthesised_speech
```

ุฏุนูุง ูุชุฃูุฏ ูู ุฃู ูุฐู ุงูุฏุงูุฉ ุงููุชุตูุฉ ุชุนุทู ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```python
sampling_rate, synthesised_speech = speech_to_speech_translation(sample["audio"])

Audio(synthesised_speech, rate=sampling_rate)
```

ูุซุงูู! ุงูุขู ุณูููู ุจุชุบููู ูุฐุง ูู ุนุฑุถ ุชูุถูุญู ูุทูู ูู Gradio ุญุชู ูุชููู ูู ุชุณุฌูู ููุงู ุงููุตุฏุฑ ุงูุฎุงุต ุจูุง ุจุงุณุชุฎุฏุงู ุฅุฏุฎุงู ุงููููุฑูููู ุฃู ุฅุฏุฎุงู ุงูููู ูุชุดุบูู ุชูุจุค ุงููุธุงู:

```python
import gradio as gr

demo = gr.Blocks()

mic_translate = gr.Interface(
fn=speech_to_speech_translation,
inputs=gr.Audio(source="microphone", type="filepath"),
outputs=gr.Audio(label="Generated Speech", type="numpy"),
)

file_translate = gr.Interface(
fn=speech_to_speech_translation,
inputs=gr.Audio(source="upload", type="filepath"),
outputs=gr.Audio(label="Generated Speech", type="numpy"),
)

with demo:
gr.TabbedInterface([mic_translate, file_translate], ["Microphone", "Audio File"])

demo.launch(debug=True)
```

ุณูุคุฏู ูุฐุง ุฅูู ุชุดุบูู ุนุฑุถ ุชูุถูุญู ูู Gradio ูุดุงุจู ููุนุฑุถ ุงูุชูุถูุญู ุงูุฐู ูุนูู ุนูู ูุณุงุญุฉ Hugging Face:

ููููู [ุงุณุชูุณุงุฎ](https://huggingface.co/spaces/course-demos/speech-to-speech-translation?duplicate=true) ูุฐุง ุงูุนุฑุถ ุงูุชูุถูุญู ูุชููููู ูุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด Whisper ูุฎุชููุฉุ ุฃู ููุทุฉ ุชูุชูุด TTS ูุฎุชููุฉุ ุฃู ุชุฎููู ููุฏ ุฅุฎุฑุงุฌ ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูุงุชุจุงุน ุงููุตุงุฆุญ ุงูููุฏูุฉ ูุชุฑุฌูุฉ ุงููุบุฉ ุงูุชู ุชุฎุชุงุฑูุง!
## ุงููุถู ูุฏูุงู:

ุนูู ุงูุฑุบู ูู ุฃู ุงููุธุงู ุงููุชุณูุณู ุทุฑููุฉ ูุนุงูุฉ ูู ุญูุซ ุงูุญุณุงุจ ูุงูุจูุงูุงุช ูุจูุงุก ูุธุงู ุชุญููู ุงูููุงู ุฅูู ูุตุ ุฅูุง ุฃูู ูุนุงูู ูู ูุดููุงุช ุงูุชุดุงุฑ ุงูุฃุฎุทุงุก ูุงูุงูุญุฑุงู ุงูุฅุถุงูู ุงููุฐููุฑุฉ ุฃุนูุงู. ููุฏ ุงุณุชูุดูุช ุงูุฃุนูุงู ุงูุญุฏูุซุฉ ููุฌูุง "ูุจุงุดุฑูุง" ูุชุญููู ุงูููุงู ุฅูู ูุตุ ููู ููุฌ ูุง ูุชูุจุฃ ุจูุต ุฅุฎุฑุงุฌ ูุณูุทุ ุจู ูููู ุจุฏูุงู ูู ุฐูู ุจุงูุชุนููู ูุจุงุดุฑุฉ ูู ุงูููุงู ุงููุตุฏุฑ ุฅูู ุงูููุงู ุงููุฏู. ูุชุชูุชุน ูุฐู ุงูุฃูุธูุฉ ุฃูุถูุง ุจุงููุฏุฑุฉ ุนูู ุงูุงุญุชูุงุธ ุจุฎุตุงุฆุต ุงููุชุญุฏุซ ุงููุตุฏุฑ ูู ุงูููุงู ุงููุฏู (ูุซู ุงูุชูุบูู ูุงูุทุจูุฉ ูุงููุจุฑุฉ). ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ูุฐู ุงูุฃูุธูุฉุ ุชุญูู ูู ุงูููุงุฑุฏ ุงููุฏุฑุฌุฉ ูู ุงููุณู ุงูุฎุงุต ุจุงููุฑุงุกุฉ ุงูุชูููููุฉ.