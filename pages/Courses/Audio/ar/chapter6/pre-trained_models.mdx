# ููุงุฐุฌ ููุฏุฑุจุฉ ูุณุจููุง ููุชุญููู ุงููุตู ุฅูู ุตูุชู

ุจุงูููุงุฑูุฉ ูุน ููุงู ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู (ASR) ูุชุตููู ุงูุตูุชุ ููุงู ุนุฏุฏ ุฃูู ุจูุซูุฑ ูู ููุงุท ุชูุชูุด ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ุงููุชุงุญุฉ. ุนูู ููุตุฉ ๐ค Hubุ ุณุชุฌุฏ ูุง ููุฑุจ ูู 300 ููุทุฉ ุชูุชูุด ููุงุณุจุฉ. ูู ุจูู ูุฐู ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุงุ ุณูุฑูุฒ ุนูู ุจููุชูู ูุชุงุญุชูู ูู ูู ููุชุจุฉ ๐ค Transformers - SpeechT5 ู Massive Multilingual Speech (MMS). ูู ูุฐุง ุงููุณูุ ุณูุณุชูุดู ููููุฉ ุงุณุชุฎุฏุงู ูุฐู ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ูู ููุชุจุฉ Transformers ููุชุญููู ุงููุตู ุฅูู ุตูุชู.

## SpeechT5

[SpeechT5](https://arxiv.org/abs/2110.07205) ูู ูููุฐุฌ ูุดุฑู Junyi Ao ูุขุฎุฑูู ูู ุดุฑูุฉ ูุงููุฑูุณููุชุ ููู ูุงุฏุฑ ุนูู ุงูุชุนุงูู ูุน ูุฌููุนุฉ ูู ููุงู ุงูููุงู. ุจูููุง ูุฑูุฒ ูู ูุฐู ุงููุญุฏุฉ ุนูู ุฌุงูุจ ุงูุชุญููู ุงููุตู ุฅูู ุตูุชูุ ูููู ุชูููู ูุฐุง ุงููููุฐุฌ ูุน ููุงู ุงูุชุญููู ุงูุตูุชู ุฅูู ูุตู (ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู ุฃู ุงูุชุนุฑู ุนูู ุงููุชุญุฏุซ)ุ ููุฐูู ุงูุชุญููู ุงูุตูุชู ุฅูู ุตูุชู (ูุซู ุชุญุณูู ุงูุตูุช ุฃู ุงูุชุญููู ุจูู ุงูุฃุตูุงุช ุงููุฎุชููุฉ). ููุฑุฌุน ุฐูู ุฅูู ููููุฉ ุชุตููู ุงููููุฐุฌ ูุชุฏุฑูุจู ุงููุณุจู.

ูู ููุจ SpeechT5 ููุฌุฏ ูููุฐุฌ ูุญูู (Transformer) ุนุงุฏู ููุชุฑููุฒ ููู ุงูุชุฑููุฒ. ุชูุงููุง ูุซู ุฃู ูุญูู ุขุฎุฑุ ุชููู ุดุจูุฉ ุงูุชุฑููุฒ ููู ุงูุชุฑููุฒ ุจุชุตููู ุชุญููู ุชุณูุณูู ุฅูู ุชุณูุณูู ุจุงุณุชุฎุฏุงู ุชูุซููุงุช ูุฎููุฉ. ูุฐุง ุงููููู ุงูุฃุณุงุณู ูููุญูู ูู ููุณู ูุฌููุน ุงูููุงู ุงูุชู ูุฏุนููุง SpeechT5.

ูุชู ุงุณุชููุงู ูุฐุง ุงููุญูู ุจุณุช ุดุจูุงุช _pre-nets_ ู _post-nets_ ูุญุฏุฏุฉ ููููุท (ููุงู/ูุต). ูุชู ูุนุงูุฌุฉ ุงูููุงู ุฃู ุงููุต ุงููุฏุฎู (ุงุนุชูุงุฏูุง ุนูู ุงููููุฉ) ูู ุฎูุงู ุดุจูุฉ _pre-net_ ุงูููุงุจูุฉ ููุญุตูู ุนูู ุงูุชูุซููุงุช ุงููุฎููุฉ ุงูุชู ูููู ูููุญูู ุงุณุชุฎุฏุงููุง. ุซู ูุชู ุชูุฑูุฑ ูุงุชุฌ ุงููุญูู ุฅูู ุดุจูุฉ _post-net_ ุงูุชู ุณุชุณุชุฎุฏูู ูุชูููุฏ ุงููุงุชุฌ ูู ุงูููุท ุงููุณุชูุฏู.

ูุฐุง ูู ุงูุดูู ุงูุฐู ุชุจุฏู ุนููู ุงูุจููุฉ (ุงูุตูุฑุฉ ูู ุงููุฑูุฉ ุงูุฃุตููุฉ):

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/speecht5/architecture.jpg" alt="ุจููุฉ SpeechT5 ูู ุงููุฑูุฉ ุงูุฃุตููุฉ">
</div>

ูุชู ุชุฏุฑูุจ SpeechT5 ูุณุจููุง ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ููุงู ููุต ุบูุฑ ูุนููุฉ ุนูู ูุทุงู ูุงุณุนุ ููุญุตูู ุนูู ุชูุซูู ููุญุฏ ููุฎุชูู ุงูุฃููุงุท. ุฎูุงู ูุฑุญูุฉ ุงูุชุฏุฑูุจ ุงููุณุจูุ ูุชู ุงุณุชุฎุฏุงู ุฌููุน ุดุจูุงุช _pre-nets_ ู _post-nets_ ูู ููุณ ุงูููุช.

ุจุนุฏ ุงูุชุฏุฑูุจ ุงููุณุจูุ ูุชู ุถุจุท ูููู ุงูุชุฑููุฒ ููู ุงูุชุฑููุฒ ุจุงููุงูู ููู ูููุฉ ูุฑุฏูุฉ. ูู ูุฐู ุงูุฎุทูุฉุ ูุชู ุงุณุชุฎุฏุงู ุดุจูุงุช _pre-nets_ ู _post-nets_ ุฐุงุช ุงูุตูุฉ ุจุงููููุฉ ุงููุญุฏุฏุฉ ููุท. ุนูู ุณุจูู ุงููุซุงูุ ูุงุณุชุฎุฏุงู SpeechT5 ููุชุญููู ุงููุตู ุฅูู ุตูุชูุ ุณุชุญุชุฌ ุฅูู ุดุจูุฉ _pre-net_ ููุชุฑููุฒ ุงููุตู ูููุฏุฎูุงุช ุงููุตูุฉุ ูุดุจูุงุช _pre-net_ ู _post-net_ ููุชุฑููุฒ ุงูุตูุชู ููููุงุชุฌ ุงูุตูุชูุฉ.

ูุณูุญ ูุฐุง ุงูููุฌ ุจุงูุญุตูู ุนูู ุนุฏุฉ ููุงุฐุฌ ูุถุจูุทุฉ ูููุงู ููุงู ูุฎุชููุฉ ุชุณุชููุฏ ุฌููุนูุง ูู ุงูุชุฏุฑูุจ ุงููุณุจู ุนูู ุงูุจูุงูุงุช ุบูุฑ ุงููุนููุฉ.

<Tip>

ุนูู ุงูุฑุบู ูู ุฃู ุงูููุงุฐุฌ ุงููุถุจูุทุฉ ุชุจุฏุฃ ุจุงุณุชุฎุฏุงู ููุณ ูุฌููุนุฉ ุงูุฃูุฒุงู ูู ุงููููุฐุฌ ุงูููุฏุฑุจ ุงููุณุจู ุงููุดุชุฑูุ ุฅูุง ุฃู ุงูุฅุตุฏุงุฑุงุช ุงูููุงุฆูุฉ ูุฎุชููุฉ ุชูุงููุง ูู ุงูููุงูุฉ. ูุง ููููู ุฃุฎุฐ ูููุฐุฌ ASR ูุถุจูุท ูุงุณุชุจุฏุงู ุดุจูุงุช _pre-nets_ ู _post-net_ ููุญุตูู ุนูู ูููุฐุฌ TTS ูุนููุ ุนูู ุณุจูู ุงููุซุงู. SpeechT5 ูุฑูุ ูููู ููุณ ุจูุฐู ุงููุฑููุฉ ;)

</Tip>

ุฏุนูุง ูุฑู ูุง ูู ุดุจูุงุช _pre-nets_ ู _post-nets_ ุงูุชู ูุณุชุฎุฏููุง SpeechT5 ููููุฉ ุงูุชุญููู ุงููุตู ุฅูู ุตูุชู ุนูู ูุฌู ุงูุชุญุฏูุฏ:

* ุดุจูุฉ _pre-net_ ููุชุฑููุฒ ุงููุตู: ุทุจูุฉ ุชุถููู ูุตู ุชููู ุจุชุนููู ุฑููุฒ ุงููุต ุฅูู ุงูุชูุซููุงุช ุงููุฎููุฉ ุงูุชู ูุชููุนูุง ุงูุชุฑููุฒ. ูุฐุง ูุดุงุจู ููุง ูุญุฏุซ ูู ูููุฐุฌ NLP ูุซู BERT.
* ุดุจูุฉ _pre-net_ ููู ุงูุชุฑููุฒ ุงูุตูุชู: ุชุฃุฎุฐ ูุฐู ุงูุดุจูุฉ ูุฎุทุท ููู ููุบุงุฑูุชูู ููุฏุฎู ูุชุณุชุฎุฏู ุณูุณูุฉ ูู ุงูุทุจูุงุช ุงูุฎุทูุฉ ูุถุบุท ุงููุฎุทุท ุฅูู ุชูุซููุงุช ูุฎููุฉ.
* ุดุจูุฉ _post-net_ ููู ุงูุชุฑููุฒ ุงูุตูุชู: ุชุชูุจุฃ ูุฐู ุงูุดุจูุฉ ุจุจูุงูุง ูุฅุถุงูุชูุง ุฅูู ูุฎุทุท ุงููุงุชุฌ ูุชุณุชุฎุฏู ูุชุญุณูู ุงููุชุงุฆุฌ.

ุนูุฏ ุงูุฌูุนุ ูุฐุง ูู ุงูุดูู ุงูุฐู ุชุจุฏู ุนููู ุจููุฉ SpeechT5 ููุชุญููู ุงููุตู ุฅูู ุตูุชู:

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/speecht5/tts.jpg" alt="ุจููุฉ SpeechT5 ููุชุญููู ุงููุตู ุฅูู ุตูุชู">
</div>

ููุง ุชุฑูุ ุงููุงุชุฌ ูู ูุฎุทุท ููู ููุบุงุฑูุชูู ูููุณ ููุฌุฉ ููุงุฆูุฉ. ุฅุฐุง ุชุฐูุฑุชุ ููุฏ ุชุทุฑููุง ุฅูู ูุฐุง ุงูููุถูุน ุจุงุฎุชุตุงุฑ ูู [ุงููุญุฏุฉ 3](../chapter3/introduction#spectrogram-output). ูู ุงูุดุงุฆุน ุฃู ุชููู ุงูููุงุฐุฌ ุงูุชู ุชููุฏ ุงูุตูุช ุจุฅูุชุงุฌ ูุฎุทุท ููู ููุบุงุฑูุชููุ ูุงูุฐู ูุญุชุงุฌ ุฅูู ุชุญูููู ุฅูู ููุฌุฉ ุจุงุณุชุฎุฏุงู ุดุจูุฉ ุนุตุจูุฉ ุฅุถุงููุฉ ุชูุนุฑู ุจุงุณู Vocoder.

ุฏุนูุง ูุฑู ููู ููููู ุงูููุงู ุจุฐูู.

ุฃููุงูุ ุฏุนูุง ูุญูู ูููุฐุฌ SpeechT5 ุงููุถุจูุท ููุชุญููู ุงููุตู ุฅูู ุตูุชู ูู ููุตุฉ ๐ค Hubุ ุฅูู ุฌุงูุจ ูุงุฆู ุงููุนุงูุฌ ุงููุณุชุฎุฏู ููุชุฌุฒูุก ูุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช:

```python
from transformers import SpeechT5Processor, SpeechT5ForTextToSpeech

processor = SpeechT5Processor.from_pretrained("microsoft/speecht5_tts")
model = SpeechT5ForTextToSpeech.from_pretrained("microsoft/speecht5_tts")
```

ุจุนุฏ ุฐููุ ุฌุฒุฆ ุงููุต ุงููุฏุฎู.

```python
inputs = processor(text="Don't count the days, make the days count.", return_tensors="pt")
```

ูููุฐุฌ SpeechT5 ููุชุญููู ุงููุตู ุฅูู ุตูุชู ููุณ ูุญุฏูุฏูุง ุจุฅูุดุงุก ุตูุช ููุชุญุฏุซ ูุงุญุฏ. ุจุฏูุงู ูู ุฐููุ ูุณุชุฎุฏู ูุง ูุณูู ุชุถูููุงุช ุงููุชุญุฏุซ ุงูุชู ุชูุชูุท ุฎุตุงุฆุต ุตูุช ูุชุญุฏุซ ูุนูู.

<Tip>

ุชุถูููุงุช ุงููุชุญุฏุซ ูู ุทุฑููุฉ ูุชูุซูู ูููุฉ ุงููุชุญุฏุซ ุจุทุฑููุฉ ูุถุบูุทุฉุ ููุชุฌู ุซุงุจุช ุงูุญุฌูุ ุจุบุถ ุงููุธุฑ ุนู ุทูู ุงูููุงู. ุชูุชูุท ูุฐู ุงูุชุถูููุงุช ูุนูููุงุช ุฃุณุงุณูุฉ ุญูู ุตูุช ุงููุชุญุฏุซุ ููุจุฑุฉ ุงูุตูุชุ ูุงูุชูุบููุ ูุบูุฑูุง ูู ุงูุฎุตุงุฆุต ุงููุฑูุฏุฉ ุงูุชู ุชููุฒ ูุชุญุฏุซูุง ุนู ุขุฎุฑ. ูููู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุถูููุงุช ููุชุญูู ูู ุงููุชุญุฏุซุ ูุชุฌุฒุฆุฉ ุงููุชุญุฏุซุ ูุชุญุฏูุฏ ุงููุชุญุฏุซุ ูุฃูุซุฑ ูู ุฐูู.
ุชุชุถูู ุงูุชูููุงุช ุงูุฃูุซุฑ ุดููุนูุง ูุชูููุฏ ุชุถูููุงุช ุงููุชุญุฏุซ ูุง ููู:

* ูุชุฌูุงุช ุงููููุฉ (I-Vectors): ุชุณุชูุฏ ูุชุฌูุงุช ุงููููุฉ ุฅูู ูููุฐุฌ ูุฒูุฌ ุบุงูุณู (GMM). ูุชูุซู ุงููุชุญุฏุซูู ููุชุฌูุงุช ุซุงุจุชุฉ ุงูุฃุจุนุงุฏ ููุฎูุถุฉ ุงูุฃุจุนุงุฏ ูุดุชูุฉ ูู ุฅุญุตุงุฆูุงุช ูููุฐุฌ GMM ุงูุฎุงุต ุจุงููุชุญุฏุซุ ููุชู ุงูุญุตูู ุนูููุง ุจุทุฑููุฉ ุบูุฑ ูุดุฑูุฉ.
* ูุชุฌูุงุช X (X-Vectors): ูุชู ุงุดุชูุงู ูุชุฌูุงุช X ุจุงุณุชุฎุฏุงู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุนูููุฉ (DNNs) ูุชูุชูุท ูุนูููุงุช ุงููุชุญุฏุซ ุนูู ูุณุชูู ุงูุฅุทุงุฑ ูู ุฎูุงู ุฏูุฌ ุงูุณูุงู ุงูุฒููู.

[ูุชุฌูุงุช X](https://www.danielpovey.com/files/2018_icassp_xvectors.pdf) ูู ุทุฑููุฉ ูุชุทูุฑุฉ ุชูุธูุฑ ุฃุฏุงุกู ูุชููููุง ุนูู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชูููููุฉ ููุงุฑูุฉ ุจูุชุฌูุงุช ุงููููุฉ. ูุชู ุงุณุชุฎุฏุงู ุงูุดุจูุฉ ุงูุนุตุจูุฉ ุงูุนูููุฉ ููุญุตูู ุนูู ูุชุฌูุงุช X: ุญูุซ ูุชู ุชุฏุฑูุจูุง ููุชูููุฒ ุจูู ุงููุชุญุฏุซููุ ูุชููู ุจุชุนููู ููุงู ูุชุบูุฑ ุงูุทูู ุฅูู ุชุถูููุงุช ุซุงุจุชุฉ ุงูุฃุจุนุงุฏ. ููููู ุฃูุถูุง ุชุญููู ุชุถููู ูุชุญุฏุซ ูุชุฌู X ุชู ุญุณุงุจู ูุณุจููุงุ ูุงูุฐู ุณูุญุชูู ุนูู ุฎุตุงุฆุต ุงูููุงู ููุชุญุฏุซ ูุนูู.

</Tip>

ุฏุนูุง ูุญูู ูุซู ูุฐุง ุงูุชุถููู ูููุชุญุฏุซ ูู ูุฌููุนุฉ ุจูุงูุงุช ุนูู ุงูููุตุฉ. ุชู ุงูุญุตูู ุนูู ุงูุชุถูููุงุช ูู [ูุฌููุนุฉ ุจูุงูุงุช CMU ARCTIC](http://www.festvox.org/cmu_arctic/) ุจุงุณุชุฎุฏุงู [ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู](https://huggingface.co/mechanicalsea/speecht5-vc/blob/main/manifest/utils/prep_cmu_arctic_spkemb.py)ุ ูููู ูุฌุจ ุฃู ูุนูู ุฃู ุชุถููู ูุชุฌู X.

```python
from datasets import load_dataset

embeddings_dataset = load_dataset("Matthijs/cmu-arctic-xvectors", split="validation")

import torch

speaker_embeddings = torch.tensor(embeddings_dataset[7306]["xvector"]).unsqueeze(0)
```

ุชุถููู ุงููุชุญุฏุซ ูู ูุตูููุฉ ุฐุงุช ุดูู (1, 512). ูุตู ูุฐุง ุงูุชุถููู ุงูุฎุงุต ูููุชุญุฏุซ ุตูุชูุง ุฃูุซูููุง.

ูู ูุฐู ุงููุฑุญูุฉุ ูุฏููุง ุจุงููุนู ูุฏุฎูุงุช ูุงููุฉ ูุชูููุฏ ูุฎุทุท ููู ููุบุงุฑูุชูู ููุงุชุฌุ ููููู ุงูููุงู ุจุฐูู ุนูู ุงููุญู ุงูุชุงูู:

```python
spectrogram = model.generate_speech(inputs["input_ids"], speaker_embeddings)
```
ูุฐุง ููุชุฌ ุนูู ูุตูููุฉ ุฐุงุช ุดูู (140ุ 80) ุชุญุชูู ุนูู ูุฎุทุท ููู ููุบุงุฑูุชูู. ุงูุจุนุฏ ุงูุฃูู ูู ุทูู ุงูุชุณูุณูุ ููุฏ ูุฎุชูู ุจูู ุงูุชุดุบูู ุญูุซ ุฃู ูู ุชุฑููุฒ ุงูููุงู ุงููุณุจู ุฏุงุฆููุง ูุง ูุทุจู ุฅุณูุงุทูุง ุนุดูุงุฆููุง ุนูู ุชุณูุณู ุงูุฅุฏุฎุงู. ูุฐุง ูุถูู ุจุนุถ ุงูุชุจุงูู ุงูุนุดูุงุฆู ููููุงู ุงููููุฏ.

ููุน ุฐููุ ุฅุฐุง ููุง ูุจุญุซ ุนู ุชูููุฏ ููุฌุฉ ุตูุชูุฉุ ูุฅููุง ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูู ุงูุชุฑููุฒ ุงูุฐู ุณูุณุชุฎุฏูู ูุชุญููู ุงููุฎุทุท ุงูุทููู ุฅูู ููุฌุฉ ุตูุชูุฉ.
ูุธุฑููุงุ ููููู ุงุณุชุฎุฏุงู ุฃู ูู ุชุฑููุฒ ูุนูู ุนูู ูุฎุทุทุงุช ููู ุฐุงุช 80 ุฎุงูุฉ. ูุญุณู ุงูุญุธุ ููุฏู ๐ค Transformers ูู ุชุฑููุฒ ูุนุชูุฏ ุนูู HiFi-GAN. ุชู ุชูููุฑ ุฃูุฒุงููุง ุจูู ูุทู ูู ูุจู ุงููุคูููู ุงูุฃุตูููู ูู SpeechT5.

<Tip>

[HiFi-GAN](https://arxiv.org/pdf/2010.05646v2.pdf) ูู ุดุจูุฉ ุชูุงูุณูุฉ ุชูููุฏูุฉ (GAN) ูุชุทูุฑุฉ ูุตููุฉ ูุชุฑููุจ ุงูููุงู ุนุงูู ุงูุฏูุฉ. ููู ูุงุฏุฑุฉ ุนูู ุชูููุฏ ููุฌุงุช ุตูุชูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ููุงูุนูุฉ ูู ูุฏุฎูุงุช ุงููุฎุทุท ุงูุทููู.

ุจุดูู ุนุงูุ ุชุชููู HiFi-GAN ูู ูููุฏ ููููุฒูู. ุงููููุฏ ูู ุดุจูุฉ ุนุตุจูุฉ ุฐุงุช ุชุฑุงุจุท ูุงูู ุชุฃุฎุฐ ูุฎุทุท ููู ููุฏุฎู ูุชุชุนูู ุฅูุชุงุฌ ููุฌุงุช ุตูุชูุฉ ุฎุงู. ุฏูุฑ ุงููููุฒูู ูู ุงูุชูููุฒ ุจูู ุงูุตูุช ุงูุญูููู ูุงููููุฏ. ูุฑูุฒ ุงููููุฒุงู ุนูู ุฌูุงูุจ ูุฎุชููุฉ ูู ุงูุตูุช.

ุชู ุชุฏุฑูุจ HiFi-GAN ุนูู ูุฌููุนุฉ ุจูุงูุงุช ูุจูุฑุฉ ูู ุงูุชุณุฌููุงุช ุงูุตูุชูุฉ ุนุงููุฉ ุงูุฌูุฏุฉ. ุชุณุชุฎุฏู ูุง ูุณูู ุจุงูุชุฏุฑูุจ ุงูุชูุงูุณูุ ุญูุซ ุชุชูุงูุณ ุดุจูุงุช ุงููููุฏ ูุงููููุฒ ุถุฏ ุจุนุถูุง ุงูุจุนุถ. ูู ุงูุจุฏุงูุฉุ ููุชุฌ ุงููููุฏ ุตูุชูุง ููุฎูุถ ุงูุฌูุฏุฉุ ููููู ูููููุฒ ุงูุชูููุฒ ุจููู ูุจูู ุงูุตูุช ุงูุญูููู ุจุณูููุฉ. ูุน ุชูุฏู ุงูุชุฏุฑูุจุ ูุญุณู ุงููููุฏ ูู ูุฎุฑุฌุงุชูุ ุจูุฏู ุฎุฏุงุน ุงููููุฒ. ุจุฏูุฑูุ ูุตุจุญ ุงููููุฒ ุฃูุซุฑ ุฏูุฉ ูู ุงูุชูููุฒ ุจูู ุงูุตูุช ุงูุญูููู ูุงููููุฏ. ุชุณุงุนุฏ ูุฐู ุงูุญููุฉ ุงูุชูุงูุณูุฉ ููุง ุงูุดุจูุชูู ุนูู ุงูุชุญุณู ูุน ูุฑูุฑ ุงูููุช. ูู ุงูููุงูุฉุ ุชุชุนูู HiFi-GAN ุชูููุฏ ุตูุช ุนุงูู ุงูุฏูุฉ ูุดุจู ุฎุตุงุฆุต ุจูุงูุงุช ุงูุชุฏุฑูุจ ุจุดูู ูุซูู.

</Tip>

ุชุญููู ูู ุงูุชุฑููุฒ ุณูู ูุซู ุฃู ูููุฐุฌ ุขุฎุฑ ูู ๐ค Transformers.

```python
from transformers import SpeechT5HifiGan

vocoder = SpeechT5HifiGan.from_pretrained("microsoft/speecht5_hifigan")
```

ุงูุขู ูู ูุง ุนููู ูุนูู ูู ุชูุฑูุฑู ูุญุฌุฉ ุนูุฏ ุชูููุฏ ุงูููุงูุ ูุณูุชู ุชุญููู ุงููุฎุฑุฌุงุช ุชููุงุฆููุง ุฅูู ููุฌุฉ ุตูุชูุฉ.

```python
speech = model.generate_speech(inputs["input_ids"], speaker_embeddings, vocoder=vocoder)
```

ุฏุนูุง ูุณุชูุน ุฅูู ุงููุชูุฌุฉ. ูุนุฏู ุงูุนููุฉ ุงูุฐู ูุณุชุฎุฏูู SpeechT5 ูู 16 ูููู ูุฑุชุฒ ุฏุงุฆููุง.

```python
from IPython.display import Audio

Audio(speech, rate=16000)
```

ุฑุงุฆุน!

ูุง ุชุชุฑุฏุฏ ูู ุชุฌุฑุจุฉ ุนุฑุถ SpeechT5 ููุชุญููู ุงููุตู ุฅูู ููุงูุ ูุงุณุชูุดุงู ุฃุตูุงุช ุฃุฎุฑูุ ูุชุฌุฑุจุฉ ูุฏุฎูุงุช ุฃุฎุฑู. ูุงุญุธ ุฃู ููุทุฉ ุงูุชูุชูุด ูุฐู ุงูููุฏุฑุจุฉ ูุณุจููุง ุชุฏุนู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ููุท:

<iframe
	src="https://matthijs-speecht5-tts-demo.hf.space"
	frameborder="0"
	width="850"
	height="450">
</iframe>

## Bark

Bark ูู ูููุฐุฌ ุชุญููู ุงููุต ุฅูู ููุงู ูุนุชูุฏ ุนูู ุงููุญูู ุงูุชุฑุญุชู Suno AI ูู [suno-ai/bark](https://github.com/suno-ai/bark).

ุนูู ุนูุณ SpeechT5ุ ูููู Bark ุจุชูููุฏ ููุฌุงุช ุตูุชูุฉ ุฎุงู ูุจุงุดุฑุฉุ ููุง ููุบู ุงูุญุงุฌุฉ ุฅูู ูู ุชุฑููุฒ ูููุตู ุฃุซูุงุก ุงูุงุณุชุฏูุงู - ููู ูุฏูุฌ ุจุงููุนู. ูุชู ุชุญููู ูุฐู ุงูููุงุกุฉ ูู ุฎูุงู ุงุณุชุฎุฏุงู [Encodec](https://huggingface.co/docs/transformers/main/en/model_doc/encodec)ุ ูุงูุฐู ูุนูู ูุฃุฏุงุฉ ุชุฑููุฒ ูุถุบุท.

ูุน Encodecุ ููููู ุถุบุท ุงูุตูุช ุฅูู ุชูุณูู ุฎููู ุงููุฒู ูุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุซู ูู ุถุบุทู ูุงุณุชุนุงุฏุฉ ุงูุตูุช ุงูุฃุตูู. ุชุณูู ุนูููุฉ ุงูุถุบุท ูุฐู ุจูุงุณุทุฉ 8 ูุชุจ ุฑููุฒุ ูุชููู ูู ูููุง ูู ูุชุฌูุงุช ุตุญูุญุฉ. ููุฑ ูู ูุฐู ุงููุชุจ ูุชูุซููุงุช ุฃู ุชุถููู ููุตูุช ูู ุดูู ุตุญูุญ. ูู ุงูููู ููุงุญุธุฉ ุฃู ูู ูุชุงุจ ุฑููุฒ ูุชุชุงูู ูุญุณู ุฌูุฏุฉ ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุช ูู ูุชุจ ุงูุฑููุฒ ุงูุณุงุจูุฉ. ูุธุฑูุง ูุฃู ูุชุจ ุงูุฑููุฒ ุนุจุงุฑุฉ ุนู ูุชุฌูุงุช ุตุญูุญุฉุ ููููู ููููุงุฐุฌ ุงููุญููุฉ ุชุนูููุงุ ูุงูุชู ุชููู ูุนุงูุฉ ุฌุฏูุง ูู ูุฐู ุงููููุฉ. ูุฐุง ูุง ุชู ุชุฏุฑูุจ Bark ุฎุตูุตูุง ููููุงู ุจู.

ูุชูุถูุญ ุฐูู ุจุดูู ุฃูุซุฑ ุชุญุฏูุฏูุงุ ูุชููู Bark ูู 4 ููุงุฐุฌ ุฑุฆูุณูุฉ:

- `BarkSemanticModel` (ูุดุงุฑ ุฅููู ุฃูุถูุง ุจุงุณู ูููุฐุฌ 'ุงููุต'): ูููุฐุฌ ูุญูู ุฐุงุชู ุงูุฑุฌุนูุฉ ุณุจุจู ูุฃุฎุฐ ููุฏุฎู ูุตูุง ูููุฒูุงุ ููุชูุจุฃ ุจุฑููุฒ ูุตูุฉ ุฏูุงููุฉ ุชูุชูุท ูุนูู ุงููุต.
- `BarkCoarseModel` (ูุดุงุฑ ุฅููู ุฃูุถูุง ุจุงุณู ูููุฐุฌ 'ุงูุณูุงุช ุงูุตูุชูุฉ ุงูุฎุดูุฉ'): ูุญูู ุฐุงุชู ุงูุฑุฌุนูุฉ ุณุจุจูุ ูุฃุฎุฐ ููุฏุฎู ูุชุงุฆุฌ ูููุฐุฌ BarkSemanticModel. ููุฏู ุฅูู ุงูุชูุจุค ุจุฃูู ูุชุงุจูู ูู ุฑููุฒ ุงูุตูุช ุงููุงุฒูุฉ ูู EnCodec.
- `BarkFineModel` (ูููุฐุฌ 'ุงูุณูุงุช ุงูุตูุชูุฉ ุงูุฏูููุฉ')ุ ูุฐู ุงููุฑุฉ ูุญูู ุฐุงุชู ุงูุชุฑููุฒ ุบูุฑ ุณุจุจูุ ูุงูุฐู ูุชูุจุฃ ุจุงููุชุจ ุงูุฃุฎูุฑุฉ ุจุดูู ุชูุฑุงุฑู ุจูุงุกู ุนูู ูุฌููุน ุชุถููู ูุชุจ ุงูุฑููุฒ ุงูุณุงุจูุฉ.
- ุจุนุฏ ุงูุชูุจุค ุจุฌููุน ูููุงุช ูุชุงุจ ุงูุฑููุฒ ูู EncodecModelุ ูุณุชุฎุฏู Bark ุฐูู ููู ุชุฑููุฒ ูุตูููุฉ ุงูุตูุช ุงููุงุชุฌุฉ.

ูุฌุจ ููุงุญุธุฉ ุฃู ูู ูุญุฏุฉ ูู ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุซูุงุซ ุงูุฃููู ูููููุง ุฏุนู ุชุถููู ุงููุชุญุฏุซ ุงูุดุฑุทู ูุดุฑุท ุตูุช ุงูุฅุฎุฑุงุฌ ููููุง ูุตูุช ูุญุฏุฏ ูุณุจููุง.

Bark ูู ูููุฐุฌ ุชุญููู ุงููุต ุฅูู ููุงู ูุงุจู ููุชุญูู ููู ููุบุงูุฉุ ููุง ูุนูู ุฃูู ููููู ุงุณุชุฎุฏุงูู ูุน ุฅุนุฏุงุฏุงุช ูุฎุชููุฉุ ููุง ุณูุฑู.

ูุจู ูู ุดูุกุ ูู ุจุชุญููู ุงููููุฐุฌ ููุนุงูุฌู.

ุฏูุฑ ุงููุนุงูุฌ ููุง ูู ูุฌูุงู:
1. ูุชู ุงุณุชุฎุฏุงูู ูุชูุณูู ุงููุต ุงููุฏุฎูุ ุฃู ุชูุทูุนู ุฅูู ูุทุน ุตุบูุฑุฉ ูููู ูููููุฐุฌ ููููุง.
2. ูุฎุฒู ุชุถููู ุงููุชุญุฏุซุ ุฃู ุฅุนุฏุงุฏุงุช ุตูุชูุฉ ูุณุจูุฉ ูููููุง ุดุฑุท ุงูุชูููุฏ.

```python
from transformers import BarkModel, BarkProcessor

model = BarkModel.from_pretrained("suno/bark-small")
processor = BarkProcessor.from_pretrained("suno/bark-small")
```

Bark ูุชุนุฏุฏ ุงูุงุณุชุฎุฏุงูุงุช ูููููู ุชูููุฏ ุตูุช ูุดุฑูุท ุจูุงุณุทุฉ [ููุชุจุฉ ุชุถููู ุงููุชุญุฏุซ](https://suno-ai.notion.site/8b8e8749ed514b0cbf3f699013548683?v=bc67cff786b04b50b3ceb756fd05f68c) ูุงูุชู ูููู ุชุญููููุง ุนุจุฑ ุงููุนุงูุฌ.

```python
# ุฅุถุงูุฉ ุชุถููู ุงููุชุญุฏุซ
inputs = processor("This is a test!", voice_preset="v2/en_speaker_3")

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/first_sample.wav" type="audio/wav"> 
Your browser does not support the audio element. 
</audio> 

ููููู ุฃูุถูุง ุชูููุฏ ุฎุทุจ ูุชุนุฏุฏุฉ ุงููุบุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงูุ ูุซู ุงููุฑูุณูุฉ ูุงูุตูููุฉ. ููููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ุจุงููุบุงุช ุงููุฏุนููุฉ [ููุง](https://huggingface.co/suno/bark). ุนูู ุนูุณ MMSุ ููุง ูู ููุถุญ ุฃุฏูุงูุ ููุณ ูู ุงูุถุฑูุฑู ุชุญุฏูุฏ ุงููุบุฉ ุงููุณุชุฎุฏูุฉุ ูููู ุจุจุณุงุทุฉ ุชูููู ุงููุต ุงููุฏุฎู ูุน ุงููุบุฉ ุงูููุงุจูุฉ.

```python
# ุฌุฑุจู ุจุงููุฑูุณูุฉุ ุฏุนูุง ูุถูู ุฃูุถูุง ุชุถููู ูุชุญุฏุซ ูุฑูุณู
inputs = processor("C'est un test!", voice_preset="v2/fr_speaker_1")

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/second_sample.wav" type="audio/wav"> 
Your browser does not support the audio element. 
</audio> 

ูููู ูููููุฐุฌ ุฃูุถูุง ุชูููุฏ **ุงุชุตุงูุงุช ุบูุฑ ููุธูุฉ** ูุซู ุงูุถุญู ูุงูุชููุฏ ูุงูุจูุงุก. ูู ูุง ุนููู ูุนูู ูู ุชุนุฏูู ุงููุต ุงููุฏุฎู ุจุงุณุชุฎุฏุงู ุฅุดุงุฑุงุช ูุฑุฌุนูุฉ ูุซู `[clears throat]`ุ `[laughter]`ุ ุฃู `...`.

```python
inputs = processor(
    "[clears throat] This is a test ... and I just took a long pause.",
    voice_preset="v2/fr_speaker_1",
)

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/third_sample.wav" type="audio/wav"> 
ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช. 
</audio> 

ูููู ูู Bark ุญุชู ุชูููุฏ ุงูููุณููู. ููููู ุงููุณุงุนุฏุฉ ุนู ุทุฑูู ุฅุถุงูุฉ โช ููุชุงุช ููุณูููุฉ โช ุญูู ูููุงุชู.

```python
inputs = processor(
    "โช In the mighty jungle, I'm trying to generate barks.",
)

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/fourth_sample.wav" type="audio/wav"> 
ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช. 
</audio> 


ุจุงูุฅุถุงูุฉ ุฅูู ูู ูุฐู ุงูููุฒุงุชุ ูุฏุนู ุจุฑูุงูุฌ Bark ุงููุนุงูุฌุฉ ุงูุฏูุนูุฉุ ููุง ูุนูู ุฃูู ููููู ูุนุงูุฌุฉ ุนุฏุฉ ุฅุฏุฎุงูุงุช ูุตูุฉ ูู ููุณ ุงูููุชุ ุนูู ุญุณุงุจ ุญุณุงุจุงุช ุฃูุซุฑ ูุซุงูุฉ.
ุนูู ุจุนุถ ุงูุฃุฌูุฒุฉุ ูุซู ูุญุฏุงุช ูุนุงูุฌุฉ ุงูุฑุณููุงุช (GPUs)ุ ุชูููู ุงูุฏูุนุงุช ูู ุชุณุฑูุน ุงูุชูููุฏ ุงูุฅุฌูุงููุ ููุง ูุนูู ุฃูู ูููู ุฃู ูููู ุฃุณุฑุน ูู ุชูููุฏ ุงูุนููุงุช ุฌููุนูุง ูุฑุฉ ูุงุญุฏุฉ ุจุฏูุงู ูู ุชูููุฏูุง ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู.

ุฏุนูุง ูุฌุฑุจ ุชูููุฏ ุจุนุถ ุงูุฃูุซูุฉ:



```python
input_list = [
    "[ูุจูุน ุฑููู] ูุฑุญุจูุงุ ุฃูู ...ุ ููุจู ูุทูู [ุถุญู]",
    "ุฏุนูุง ูุฌุฑุจ ุชูููุฏ ุงูููุงูุ ุจุงุณุชุฎุฏุงู Barkุ ููู ูููุฐุฌ ุชุญููู ุงููุต ุฅูู ููุงู",
    "โช ูู ุงูุบุงุจุฉุ ุงูุบุงุจุฉ ุงูุนุธููุฉุ ููุจุญ ุงูุฃุณุฏ ูุฐู ุงููููุฉ โช",
]

# ุฃุถู ุฃูุถูุง ุชุถููู ุงููุชุญุฏุซ
inputs = processor(input_list, voice_preset="v2/en_speaker_3")

speech_output = model.generate(**inputs).cpu().numpy()
```

ุฏุนูุง ูุณุชูุน ุฅูู ุงููุฎุฑุฌุงุช ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู.

ุงูุฃูู:
```python
from IPython.display import Audio

sampling_rate = model.generation_config.sample_rate
Audio(speech_output[0], rate=sampling_rate)
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_1.wav" type="audio/wav"> 
ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช. 
</audio> 


ุงูุซุงูู:
```python
Audio(speech_output[1], rate=sampling_rate)
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_2.wav" type="audio/wav"> 
ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช. 
</audio> 

ุงูุซุงูุซ:
```python
Audio(speech_output[2], rate=sampling_rate)
```

<audio controls> 
  <source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_3.wav" type="audio/wav"> 
ูุชุตูุญู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช. 
</audio> 

<Tip>

ูููู ุชุญุณูู ุจุฑูุงูุฌ Barkุ ูุซู ููุงุฐุฌ ๐ค Transformers ุงูุฃุฎุฑูุ ูู ุจุถุน ุณุทูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูููุง ูุชุนูู ุจุชุฃุซูุฑ ุงูุณุฑุนุฉ ูุงูุฐุงูุฑุฉ. ููุนุฑูุฉ ููููุฉ ุงูููุงู ุจุฐููุ ุงููุฑ ุนูู [ุฏูุชุฑ ุงูููุงุญุธุงุช ุงูุชูุถูุญู ููุฐุง ุงูุชุนุงูู](https://colab.research.google.com/github/ylacombe/notebooks/blob/main/Benchmark_Bark_HuggingFace.ipynb).

</Tip>

## ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุช ุงูุถุฎู (MMS)

ูุงุฐุง ูู ููุช ุชุจุญุซ ุนู ูููุฐุฌ ููุฏุฑุจ ูุณุจููุง ุจูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุช ุงูุถุฎู (MMS) ูู 
ูููุฐุฌ ุขุฎุฑ ูุบุทู ูุฌููุนุฉ ูู ููุงู ุงูููุงูุ ููุน ุฐููุ ูุฅูู ูุฏุนู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงููุบุงุช. ุนูู ุณุจูู ุงููุซุงูุ ููููู 
ุชุฎููู ุงูููุงู ูู ุฃูุซุฑ ูู 1100 ูุบุฉ.

ูุนุชูุฏ MMS ูุชุญููู ุงููุต ุฅูู ููุงู ุนูู [VITS Kim et al., 2021](https://arxiv.org/pdf/2106.06103.pdf)ุ ููู ุฃุญุฏ 
ุงูููุฌ ุงููุชูุฏูุฉ ูุชุญููู ุงููุต ุฅูู ููุงู.

VITS ูู ุดุจูุฉ ุชูููุฏ ุงูููุงู ุงูุชู ุชุญูู ุงููุต ุฅูู ููุฌุงุช ุตูุชูุฉ ุฎุงู. ุชุนูู ูุซู ูู ุงูุชุดููุฑ ุงูุชุจุงููู ุงูุดุฑุทูุ ูุชูุฏูุฑ ููุฒุงุช ุงูุตูุช ูู ุงููุต ุงููุฏุฎู. ุฃููุงูุ ูุชู ุชูููุฏ ุงูููุฒุงุช ุงูุตูุชูุฉุ ุงูููุซูุฉ ุนูู ุดูู ุทูู. ุซู ูุชู ูู ุชุฑููุฒ ุงูููุฌุฉ ุจุงุณุชุฎุฏุงู ุทุจูุงุช ุงูุชุญููู ุงูุนุงุจุฑุฉ ุงูููููุฉ ูู HiFi-GAN. 
ุฎูุงู ุงูุงุณุชุฏูุงูุ ูุชู ุชุตุนูุฏ ุชุฑููุฒุงุช ุงููุต ูุชุญููููุง ุฅูู ููุฌุงุช ุตูุชูุฉ ุจุงุณุชุฎุฏุงู ูุญุฏุฉ ุงูุชุฏูู ููู ุชุฑููุฒ HiFi-GAN.
ูุซู Barkุ ูุง ุชูุฌุฏ ุญุงุฌุฉ ุฅูู ูู ุงูุชุดููุฑุ ุญูุซ ูุชู ุชูููุฏ ุงูููุฌุงุช ุงูุตูุชูุฉ ูุจุงุดุฑุฉ.

<Tip warning={true}>
	
ุชูุช ุฅุถุงูุฉ ูููุฐุฌ MMS ุฅูู ๐ค Transformers ูุคุฎุฑูุง ุฌุฏูุงุ ูุฐูู ุณูุชุนูู ุนููู ุชุซุจูุช ุงูููุชุจุฉ ูู ุงููุตุฏุฑ:

```bash
pip install git+https://github.com/huggingface/transformers.git
```

</Tip>

ุฏุนูุง ูุฌุฑุจ MMSุ ููุฑู ููู ูููููุง ุชุฎููู ุงูููุงู ุจูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ ูุซู ุงูุฃููุงููุฉ.
ุฃููุงูุ ุณูููู ุจุชุญููู ููุทุฉ ุงูุชุญูู ูู ุงููููุฐุฌ ูููุณู ุงูุฑููุฒ ููุบุฉ ุงูุตุญูุญุฉ: 

```python
from transformers import VitsModel, VitsTokenizer

model = VitsModel.from_pretrained("facebook/mms-tts-deu")
tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-deu")
```

ูุฏ ุชูุงุญุธ ุฃูู ูุชุญููู ูููุฐุฌ MMS ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู `VitsModel` ู `VitsTokenizer`. ูุฐูู ูุฃู MMS ูุชุญููู ุงููุต ุฅูู ููุงู 
ูุนุชูุฏ ุนูู ูููุฐุฌ VITS ููุง ุฐูุฑูุง ุณุงุจููุง. 

ุฏุนูุง ูุฎุชุงุฑ ูุซุงููุง ูููุต ุจุงููุบุฉ ุงูุฃููุงููุฉุ ูุซู ูุฐูู ุงูุณุทุฑูู ุงูุฃูููู ูู ุฃุบููุฉ ููุฃุทูุงู: 

```python
text_example = (
    "Ich bin Schnappi das kleine Krokodil, komm aus รgypten das liegt direkt am Nil."
)
```

ูุฅูุชุงุฌ ูุฎุฑุฌุงุช ุงูููุฌุฉุ ูู ุจูุนุงูุฌุฉ ุงููุต ูุณุจููุง ุจุงุณุชุฎุฏุงู ููุณู ุงูุฑููุฒุ ููุฑุฑู ุฅูู ุงููููุฐุฌ:

```python
import torch

inputs = tokenizer(text_example, return_tensors="pt")
input_ids = inputs["input_ids"]


with torch.no_grad():
    outputs = model(input_ids)

speech = outputs["waveform"]
```

ุฏุนูุง ูุณุชูุน ุฅููู:

```python
from IPython.display import Audio

Audio(speech, rate=16000)
```

ุฑุงุฆุน! ุฅุฐุง ููุช ุชุฑุบุจ ูู ุชุฌุฑุจุฉ MMS ุจูุบุฉ ุฃุฎุฑูุ ุงุจุญุซ ุนู ููุงุท ุชูุชูุด ุฃุฎุฑู ููุงุณุจุฉ ูู `vits` [ุนูู ๐ค Hub](https://huggingface.co/models?filter=vits).

ุงูุขู ุฏุนูุง ูุฑู ููู ููููู ุถุจุท ูููุฐุฌ ุชุญููู ุงููุต ุฅูู ููุงู ุจููุณู!