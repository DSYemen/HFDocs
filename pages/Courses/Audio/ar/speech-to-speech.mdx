# ุงูุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ุงูููุงู

ุงูุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ุงูููุงู (STST ุฃู S2ST) ูู ูููุฉ ูุนุงูุฌุฉ ุงููุบุฉ ุงูููุทููุฉ ุฌุฏูุฏุฉ ูุณุจููุง. ูุชูุทูู ุนูู ุชุฑุฌูุฉ ุงูููุงู ูู ูุบุฉ ุฅูู ููุงู ุจูุบุฉ **ูุฎุชููุฉ**:

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/s2st.png" alt="ูุฎุทุท ููุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ุงูููุงู">
</div>

ูููู ุงุนุชุจุงุฑ STST ุงูุชุฏุงุฏูุง ููููุฉ ุงูุชุฑุฌูุฉ ุงูุขููุฉ (MT) ุงูุชูููุฏูุฉ: ุจุฏูุงู ูู ุชุฑุฌูุฉ **ุงููุต** ูู ูุบุฉ ุฅูู ุฃุฎุฑูุ ูุฅููุง ูุชุฑุฌู **ุงูููุงู** ูู ูุบุฉ ุฅูู ุฃุฎุฑู. ุชูุชูู STST ุชุทุจููุงุช ูู ูุฌุงู ุงูุชูุงุตู ูุชุนุฏุฏ ุงููุบุงุชุ ููุง ููููู ุงููุชุญุฏุซูู ุจูุบุงุช ูุฎุชููุฉ ูู ุงูุชูุงุตู ูุน ุจุนุถูู ุงูุจุนุถ ูู ุฎูุงู ูุณูุท
ุงูููุงู.

ุงูุชุฑุถ ุฃูู ุชุฑูุฏ ุงูุชูุงุตู ูุน ุดุฎุต ุขุฎุฑ ุนุจุฑ ุญุงุฌุฒ ุงููุบุฉ. ุจุฏูุงู ูู ูุชุงุจุฉ ุงููุนูููุงุช ุงูุชู ุชุฑูุฏ ููููุง ูุชุฑุฌูุชูุง ุฅูู ูุต ุจุงููุบุฉ ุงููุณุชูุฏูุฉุ ููููู
ุงูุชููู ูุจุงุดุฑุฉู ูุงูุณูุงุญ ููุธุงู STST ุจุชุญููู ููุงูู ุงูููุทูู ุฅูู ุงููุบุฉ ุงููุณุชูุฏูุฉ. ูููู ูููุณุชูู ุจุนุฏ ุฐูู
ุงูุฑุฏ ุจุงูุชุญุฏุซ ูุฑุฉ ุฃุฎุฑู ุฅูู ูุธุงู STSTุ ูููููู ุงูุงุณุชูุงุน ุฅูู ุงุณุชุฌุงุจุชู. ูุฐู ุทุฑููุฉ ุฃูุซุฑ ุทุจูุนูุฉ ููุชูุงุตู
ููุงุฑูุฉ ุจุงูุชุฑุฌูุฉ ุงูุขููุฉ ุงููุงุฆูุฉ ุนูู ุงููุต.

ูู ูุฐุง ุงููุตูุ ุณูุณุชูุดู ููุฌูุง *ูุชุณูุณููุง* ูู STSTุ ุญูุซ ูุฌูุน ูุนูุง ุงููุนุฑูุฉ ุงูุชู ุงูุชุณุจุชูุง ูู ุงููุญุฏุงุช
5 ู 6 ูู ุงูุฏูุฑุฉ ุงูุชุฏุฑูุจูุฉ. ุณูุณุชุฎุฏู ูุธุงู *ุชุฑุฌูุฉ ุงูููุงู (ST)* ููุณุฎ ุงูููุงู ุงููุตุฏุฑ ุฅูู ูุต ุจุงููุบุฉ ุงููุณุชูุฏูุฉ
ุ ุซู *ุงููุต ุฅูู ุงูููุงู (TTS)* ูุชูููุฏ ุงูููุงู ุจุงููุบุฉ ุงููุณุชูุฏูุฉ ูู ุงููุต ุงููุชุฑุฌู:

<div class="flex justify-center">
    <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/s2st_cascaded.png" alt="ูุฎุทุท ููุชุฑุฌูุฉ ูู ุงูููุงู ุฅูู ุงูููุงู ุงููุชุณูุณู">
</div>

ูููููุง ุฃูุถูุง ุงุณุชุฎุฏุงู ููุฌ ุซูุงุซู ุงููุฑุงุญูุ ุญูุซ ูุณุชุฎุฏู ุฃููุงู ูุธุงู ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู (ASR) ููุณุฎ
ููุงู ุงููุตุฏุฑ ุฅูู ูุต ุจุงููุบุฉ ููุณูุงุ ุซู ุงูุชุฑุฌูุฉ ุงูุขููุฉ ูุชุฑุฌูุฉ ุงููุต ุงูููุณูุฎ
ุฅูู ุงููุบุฉ ุงููุณุชูุฏูุฉุ ูุฃุฎูุฑูุง ุงููุต ุฅูู ุงูููุงู ูุชูููุฏ ุงูููุงู ุจุงููุบุฉ ุงููุณุชูุฏูุฉ. ููุน ุฐููุ ูุฅู ุฅุถุงูุฉ ุงููุฒูุฏ
ุงูููููุงุช ุฅูู ุฎุท ุงูุฃูุงุจูุจ ุชุคุฏู ุฅูู *ุงูุชุดุงุฑ ุงูุฃุฎุทุงุก*ุ ุญูุซ ูุชู ุชุถุฎูู ุงูุฃุฎุทุงุก ุงูุชู ุชู ุชูุฏูููุง ูู ูุธุงู ูุงุญุฏ
ุนูุฏ ุชุฏูููุง ุนุจุฑ ุงูุฃูุธูุฉ ุงููุชุจููุฉุ ููุง ุชุฒูุฏ ูู ุฒูู ุงูุชุฃุฎูุฑุ ุญูุซ ูุฌุจ ุฅุฌุฑุงุก ุงูุงุณุชูุชุงุฌ ููุฒูุฏ ูู ุงูููุงุฐุฌ.

ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูููุฌ ุงููุชุณูุณู ูู STST ุจุณูุท ุฅูู ุญุฏ ูุงุ ุฅูุง ุฃูู ูุคุฏู ุฅูู ุฃูุธูุฉ STST ูุนุงูุฉ ููุบุงูุฉ. ุชู ุงุณุชุฎุฏุงู ูุธุงู ูุชุณูุณู ุซูุงุซู ุงููุฑุงุญู ูู ASR + MT + TTS ุณุงุจููุง ูุชุดุบูู ุงูุนุฏูุฏ ูู ุงูููุชุฌุงุช ุงูุชุฌุงุฑูุฉ ูู STSTุ ุจูุง ูู ุฐูู [Google Translate](https://ai.googleblog.com/2019/05/introducing-translatotron-end-to-end.html).
ููุง ุฃููุง ุทุฑููุฉ ูุนุงูุฉ ููุบุงูุฉ ูู ุญูุซ ุงูุจูุงูุงุช ูุงูุญูุณุจุฉ ูุชุทููุฑ ูุธุงู STSTุ ุญูุซ ูููู ุฑุจุท ุฃูุธูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ุงูููุฌูุฏุฉ
ูุฃูุธูุฉ ุงููุต ุฅูู ุงูููุงู ูุนูุง ูุฅูุชุงุฌ ูููุฐุฌ STST ุฌุฏูุฏ ุจุฏูู ุฃู ุชุฏุฑูุจ ุฅุถุงูู.

ูู ุจููุฉ ูุฐู ุงููุญุฏุฉุ ุณูุฑูุฒ ุนูู ุฅูุดุงุก ูุธุงู STST ูููู ุจุชุฑุฌูุฉ ุงูููุงู ูู ุฃู ูุบุฉ X ุฅูู ุงูููุงู
ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ูููู ุชูุณูุน ุงูุฃุณุงููุจ ุงููุดูููุฉ ูุฃูุธูุฉ STST ุงูุชู ุชุชุฑุฌู ูู ุฃู ูุบุฉ X ุฅูู ุฃู
ุงููุบุฉ Yุ ููููุง ูุชุฑู ูุฐุง ูุชูุณุนุฉ ูููุงุฑุฆ ูููุฏู ุฅุฑุดุงุฏุงุช ุญูุซูุง ููุทุจู ุฐูู. ูููู ุจุชูุณูู ูููุฉ STST ุฃูุซุฑ ุฅูู
ููููุงุชูุง ุงูุฏุณุชูุฑูุฉ: ST ู TTS. ุณูููููุง ุจุฌูุนูุง ูุนูุง ูุจูุงุก ุนุฑุถ ุชูุถูุญู ูู Gradio
ูุฅุธูุงุฑ ูุธุงููุง.

## ุชุฑุฌูุฉ ุงูููุงู

ุณูุณุชุฎุฏู ูููุฐุฌ Whisper ููุธุงู ุชุฑุฌูุฉ ุงูููุงู ูุฏููุงุ ุญูุซ ุฃูู ูุงุฏุฑ ุนูู ุงูุชุฑุฌูุฉ ูู ุฃูุซุฑ ูู 96 ูุบุฉ
ุฅูู ุงูุฅูุฌููุฒูุฉ. ุนูู ูุฌู ุงูุชุญุฏูุฏุ ุณูููู ุจุชุญููู ููุทุฉ ุงูุชุญูู [Whisper Base](https://huggingface.co/openai/whisper-base)ุ ูุงูุชู
ุชุณุฌู 74 ููููู ูุนุงูู. ุฅูู ููุณ ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ูููุฐุฌ Whisper ุงูุฃูุซุฑ ุฃุฏุงุกูุ ุญูุซ ุฃู ููุทุฉ ุงูุชุญูู ุงูุฃูุจุฑ ูู Whisper](https://huggingface.co/openai/whisper-large-v2)
ุฃูุจุฑ ูู 20 ูุฑุฉุ ูููู ูุธุฑูุง ูุฃููุง ูููู ุจุชูุตูู ูุธุงููู ุชุฑุงุฌุนู ุฐุงุชู ูุนูุง (ST + TTS)ุ ูุฅููุง ูุฑูุฏ ุงูุชุฃูุฏ
ูููู ููู ูููุฐุฌ ุชูููุฏ ุจุณุฑุนุฉ ูุณุจูุฉ ุจุญูุซ ูุญุตู ุนูู ุณุฑุนุฉ ุงุณุชูุชุงุฌ ูุนูููุฉ:

```python
import torch
from transformers import pipeline

device = "cuda:0" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
    "automatic-speech-recognition", model="openai/whisper-base", device=device
)
```

ุฑุงุฆุน! ูุงุฎุชุจุงุฑ ูุธุงู STST ุงูุฎุงุต ุจูุงุ ุณูููู ุจุชุญููู ุนููุฉ ุตูุชูุฉ ุจูุบุฉ ุบูุฑ ุงูุฅูุฌููุฒูุฉ. ุฏุนูุง ูุญูู ุงููุซุงู ุงูุฃูู ูู
ุงูุงููุณุงู ุงูุฅูุทุงูู (`it`) ููุฌููุนุฉ ุจูุงูุงุช [VoxPopuli](https://huggingface.co/datasets/facebook/voxpopuli):

```python
from datasets import load_dataset

dataset = load_dataset("facebook/voxpopuli", "it", split="validation", streaming=True)
sample = next(iter(dataset))
```

ูุณูุงุน ูุฐู ุงูุนููุฉุ ูููููุง ุฅูุง ุชุดุบูููุง ุจุงุณุชุฎุฏุงู ุนุงุฑุถ ูุฌููุนุฉ ุงูุจูุงูุงุช ุนูู Hub: [facebook/voxpopuli/viewer](https://huggingface.co/datasets/facebook/voxpopuli/viewer/it/validation?row=0)

ุฃู ุชุดุบูููุง ุจุงุณุชุฎุฏุงู ููุฒุฉ ุงูุตูุช ipynb:

```python
from IPython.display import Audio

Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```

ุงูุขู ุฏุนูุง ูุญุฏุฏ ุฏุงูุฉ ุชุฃุฎุฐ ูุฐุง ุงูุฅุฏุฎุงู ุงูุตูุชู ูุชุนูุฏ ุงููุต ุงููุชุฑุฌู. ุณุชุชุฐูุฑ ุฃูู ูุชุนูู ุนูููุง
ุชูุฑูุฑ ุญุฌุฉ ุงููููุฉ ุงูุฑุฆูุณูุฉ ููุฌูู ูู `"task"`ุ ูุชุนููููุง ุนูู `"translate"` ููุชุฃูุฏ ูู ุฃู Whisper ูููู ุจุชูููุฐ
ุชุฑุฌูุฉ ุงูููุงู ูููุณ ุงูุชุนุฑู ุนูู ุงูููุงู:

```python
def translate(audio):
    outputs = pipe(audio, max_new_tokens=256, generate_kwargs={"task": "translate"})
    return outputs["text"]
```

<Tip>

    ูููู ุฃูุถูุง "ุฎุฏุงุน" Whisper ูุชุฑุฌูุฉ ุงูููุงู ูู ุฃู ูุบุฉ X ุฅูู ุฃู ูุบุฉ Y. ูู ุจุจุณุงุทุฉ ุจุชุนููู ุงููููุฉ ุฅูู
    `"transcribe"` ู `"language"` ุฅูู ูุบุชู ุงููุณุชูุฏูุฉ ูู ุญุฌุฉ ุงููููุฉ ุงูุฑุฆูุณูุฉ ููุฌููุ
    ุนูู ุณุจูู ุงููุซุงู ููุฅุณุจุงููุฉุ ุณูุชู ุชุนููู:

	`generate_kwargs={"task": "transcribe", "language": "es"&rcub;`

</Tip>

ุฑุงุฆุน! ุฏุนูุง ูุชุญูู ุจุณุฑุนุฉ ูู ุฃููุง ูุญุตู ุนูู ูุชูุฌุฉ ูุนูููุฉ ูู ุงููููุฐุฌ:

```python
translate(sample["audio"].copy())
```
```
' ุงูููุณู ูุงูุงุฌุชูุงุนู. ุฃุนุชูุฏ ุฃููุง ุฎุทูุฉ ูููุฉ ููุบุงูุฉ ูู ุจูุงุก ูุณุงุญุฉ ูุงููููุฉ ููุญุฑูุฉ ูุงูุชููู ูุญูุงูุฉ ุงูุญููู.'
```

ุญุณููุง! ุฅุฐุง ูุงุฑูุง ูุฐุง ุจุงููุต ุงููุตุฏุฑ:

```python
sample["raw_text"]
```
```
'ุฃุนุชูุฏ ุฃู ูุฐู ุฎุทูุฉ ุฅูู ุงูุฃูุงู ูููุฉ ูู ุจูุงุก ูุณุงุญุฉ ูุงููููุฉ ูุญุฑูุฉ ุงูุชููู ูุญูุงูุฉ ุงูุญููู ููุฃุดุฎุงุต ูู ุฃูุฑูุจุง.'
```

ูุฑู ุฃู ุงูุชุฑุฌูุฉ ุชุชุทุงุจู ุชูุฑูุจูุง (ููููู ุงูุชุญูู ูู ุฐูู ุจุงุณุชุฎุฏุงู Google Translate)ุ ุจุงุณุชุซูุงุก ุจุถุน ูููุงุช ุฅุถุงููุฉ ุตุบูุฑุฉ
ูู ุจุฏุงูุฉ ุงููุณุฎ ุญูุซ ูุงู ุงููุชุญุฏุซ ูููู ุฌููุชู ุงูุณุงุจูุฉ.

ุจูุฐุงุ ุฃููููุง ุงููุตู ุงูุฃูู ูู ุฎุท ุฃูุงุจูุจ STST ุงููุชุณูุณูุ ุญูุซ ูุถุน ูู ุงูููุงุฑุณุฉ ุงูููุงุฑุงุช ุงูุชู ุงูุชุณุจูุงูุง ูู ุงููุญุฏุฉ 5
ุนูุฏูุง ุชุนูููุง ููููุฉ ุงุณุชุฎุฏุงู ูููุฐุฌ Whisper ููุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ. ุฅุฐุง ููุช ุชุฑูุฏ ูุฑุงุฌุนุฉ ุฃู ูู
ุงูุฎุทูุงุช ุงูุชู ุบุทููุงูุงุ ุงูุฑุฃ ุงููุณู ุญูู [ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ููุชุนุฑู ุนูู ุงูููุงู](../chapter5/asr_models) ูู ุงููุญุฏุฉ 5.

## ุงููุต ุฅูู ุงูููุงู

ููุทูู ุงููุตู ุงูุซุงูู ูู ูุธุงู STST ุงููุชุณูุณู ุนูู ุฑุณู ุฎุฑูุทุฉ ูู ุงููุต ุงูุฅูุฌููุฒู ุฅูู ุงูููุงู ุงูุฅูุฌููุฒู. ููุฐุงุ ุณูุณุชุฎุฏู
ูููุฐุฌ [SpeechT5 TTS](https://huggingface.co/microsoft/speecht5_tts) ุงูููุฏุฑุจ ูุณุจููุง ููุบุฉ ุงูุฅูุฌููุฒูุฉ TTS. ๐ค Transformers ูุง ูุญุชูู ุญุงูููุง ุนูู TTS `pipeline`ุ ูุฐูู ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ุงููููุฐุฌ ูุจุงุดุฑุฉ ุจุฃููุณูุง. ูุฐุง ููุณ ุจุงูุฃูุฑ ุงููุจูุฑุ ุฃูุชู ุฌููุนูุง ุฎุจุฑุงุก ูู ุงุณุชุฎุฏุงู
ุงููููุฐุฌ ููุงุณุชุฏูุงู ุจุนุฏ ุงููุญุฏุฉ 6!

ุฃููุงูุ ุฏุนูุง ูุญูู ูุนุงูุฌ SpeechT5 ูุงููููุฐุฌ ูุงููุญูู ุงูุตูุชู ูู ููุทุฉ ุงูุชุญูู ุงูููุฏุฑุจุฉ ูุณุจููุง:

```python
from transformers import SpeechT5Processor, SpeechT5ForTextToSpeech, SpeechT5HifiGan

processor = SpeechT5Processor.from_pretrained("microsoft/speecht5_tts")

model = SpeechT5ForTextToSpeech.from_pretrained("microsoft/speecht5_tts")
vocoder = SpeechT5HifiGan.from_pretrained("microsoft/speecht5_hifigan")
```
<Tip>
    ููุง ูุณุชุฎุฏู ููุทุฉ ุชูุชูุด SpeechT5 ูุฏุฑุจุฉ ุฎุตูุตูุง ูุชุฑููุจ ุงููุต ุฅูู ููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุชุฑุฌูุฉ ุฅูู ูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ ููููู ุฅูุง ุงุณุชุจุฏุงู ููุทุฉ ุงูุชูุชูุด ุจูููุฐุฌ SpeechT5 TTS ูุฏุฑุจ ูุณุจููุง ุนูู ุงููุบุฉ ุงูุชู ุชุฎุชุงุฑูุงุ ุฃู ุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด MMS TTS ูุฏุฑุจุฉ ูุณุจููุง ุนูู ุงููุบุฉ ุงููุณุชูุฏูุฉ.
</Tip>

ููุง ูู ุงูุญุงู ูุน ูููุฐุฌ Whisperุ ุณูุถุน ูููุฐุฌ SpeechT5 ูุงููุญูู ุงูุตูุชู ุนูู ุฌูุงุฒ ุชุณุฑูุน GPU ุฅุฐุง ูุงู ูุชููุฑูุง:
```python
model.to(device)
vocoder.to(device)
```

ุฑุงุฆุน! ุฏุนูุง ูุญูู ุชุถููู ุงููุชุญุฏุซ:

```python
embeddings_dataset = load_dataset("Matthijs/cmu-arctic-xvectors", split="validation")
speaker_embeddings = torch.tensor(embeddings_dataset[7306]["xvector"]).unsqueeze(0)
```

ุงูุขู ูููููุง ูุชุงุจุฉ ุฏุงูุฉ ุชุฃุฎุฐ ูุตูุง ููุฏุฎูุ ูุชููุฏ ุงูููุงู ุงูููุงุจู. ุณูููู ุฃููุงู ุจูุนุงูุฌุฉ ุงููุต ุงููุฏุฎู ุจุงุณุชุฎุฏุงู ูุนุงูุฌ SpeechT5ุ ูุชูุทูุน ุงููุต ููุญุตูู ุนูู ูุนุฑูุงุช ุงูุฅุฏุฎุงู. ุจุนุฏ ุฐููุ ุณููุฑุฑ ูุนุฑูุงุช ุงูุฅุฏุฎุงู ูุชุถููู ุงููุชุญุฏุซ ุฅูู ูููุฐุฌ SpeechT5ุ ููุถุน ูู ููููุง ุนูู ุฌูุงุฒ ุงูุชุณุฑูุน ุฅุฐุง ูุงู ูุชููุฑูุง. ุฃุฎูุฑูุงุ ุณูุนูุฏ ุงูููุงู ุงููููุฏุ ููุนูุฏู ุฅูู CPU ุญุชู ูุชููู ูู ุชุดุบููู ูู ุฏูุชุฑ ipynb ุงูุฎุงุต ุจูุง:

```python
def synthesise(text):
    inputs = processor(text=text, return_tensors="pt")
    speech = model.generate_speech(
        inputs["input_ids"].to(device), speaker_embeddings.to(device), vocoder=vocoder
    )
    return speech.cpu()
```

ุฏุนูุง ูุชุฃูุฏ ูู ุนููู ูุน ูุต ุงุฎุชุจุงุฑู:
```python
speech = synthesise("ูุฑุญุจูุง! ูุฐุง ุงุฎุชุจุงุฑ!")

Audio(speech, rate=16000)
```

ูุจุฏู ุฌูุฏูุง! ุงูุขู ุงูุฌุฒุก ุงููุซูุฑ - ุชุฌููุน ูู ุดูุก ูุนูุง.

## ุฅูุดุงุก ุนุฑุถ ุชูุถูุญู ูู STST

ูุจู ุฅูุดุงุก ุนุฑุถ ุชูุถูุญู ูู Gradio ูุนุฑุถ ูุธุงู STST ุงูุฎุงุต ุจูุงุ ุฏุนูุง ูููู ุจูุญุต ุณุฑูุน ููุชุฃูุฏ ูู ุฃููุง ูููููุง ุชุฌููุน ุงููููุฐุฌููุ ูุฅุฏุฎุงู ุนููุฉ ุตูุชูุฉ ูุงูุญุตูู ุนูู ุนููุฉ ุตูุชูุฉ ููุชูุฌุฉ. ุณูููู ุจุฐูู ุนู ุทุฑูู ุชุฌููุน ุงูุฏุงูุชูู ุงููุชูู ุญุฏุฏูุงููุง ูู ุงููุณููู ุงููุฑุนููู ุงูุณุงุจูููุ ุจุญูุซ ูุฏุฎู ุงูุตูุช ุงููุตุฏุฑ ููุญุตู ุนูู ุงููุต ุงููุชุฑุฌูุ ุซู ูููุฏ ุงูููุงู ุงููุชุฑุฌู ููุญุตูู ุนูู ุงูููุงู ุงููุชุฑุฌู. ุฃุฎูุฑูุงุ ุณูุญูู ุงูููุงู ุงููููุฏ ุฅูู ูุตูููุฉ ูู ุงูููุน `int16`ุ ููู ุชูุณูู ููู ุงูุตูุช ุงููุชููุน ูู Gradio. ููููุงู ุจุฐููุ ูุฌุจ ุนูููุง ุฃููุงู ุชุทุจูุน ุงููุตูููุฉ ุงูุตูุชูุฉ ููููุง ูููุทุงู ุงูุฏููุงูููู ูููุน ุงูุจูุงูุงุช ุงููุณุชูุฏู (`int16`)ุ ุซู ุงูุชุญููู ูู ููุน ุจูุงูุงุช NumPy ุงูุงูุชุฑุงุถู (`float64`) ุฅูู ููุน ุงูุจูุงูุงุช ุงููุณุชูุฏู (`int16`):

```python
import numpy as np

target_dtype = np.int16
max_range = np.iinfo(target_dtype).max


def speech_to_speech_translation(audio):
    translated_text = translate(audio)
    synthesised_speech = synthesise(translated_text)
    synthesised_speech = (synthesised_speech.numpy() * max_range).astype(np.int16)
    return 16000, synthesised_speech
```

ุฏุนูุง ูุชุฃูุฏ ูู ุฃู ูุฐู ุงูุฏุงูุฉ ุงููุฌูุนุฉ ุชุนุทู ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```python
sampling_rate, synthesised_speech = speech_to_speech_translation(sample["audio"])

Audio(synthesised_speech, rate=sampling_rate)
```

ููุชุงุฒ! ุงูุขู ุณูุบูู ูู ูุฐุง ูู ุนุฑุถ ุชูุถูุญู ูู Gradio ุญุชู ูุชููู ูู ุชุณุฌูู ุงูููุงู ุงููุตุฏุฑ ุจุงุณุชุฎุฏุงู ุฅุฏุฎุงู ุงููููุฑูููู ุฃู ุฅุฏุฎุงู ุงูููู ูุชุดุบูู ุชูุจุค ุงููุธุงู:

```python
import gradio as gr

demo = gr.Blocks()

mic_translate = gr.Interface(
    fn=speech_to_speech_translation,
    inputs=gr.Audio(source="microphone", type="filepath"),
    outputs=gr.Audio(label="Generated Speech", type="numpy"),
)

file_translate = gr.Interface(
    fn=speech_to_speech_translation,
    inputs=gr.Audio(source="upload", type="filepath"),
    outputs=gr.Audio(label="Generated Speech", type="numpy"),
)

with demo:
    gr.TabbedInterface([mic_translate, file_translate], ["Microphone", "Audio File"])

demo.launch(debug=True)
```

ุณูุชู ุฅุทูุงู ุนุฑุถ ุชูุถูุญู ูู Gradio ูุดุงุจู ููุนุฑุถ ุงูุชูุถูุญู ุงูุฐู ูุนูู ุนูู Hugging Face Space:

<iframe src="https://course-demos-speech-to-speech-translation.hf.space" frameBorder="0" height="450" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

ููููู [ุงุณุชูุณุงุฎ](https://huggingface.co/spaces/course-demos/speech-to-speech-translation?duplicate=true) ูุฐุง ุงูุนุฑุถ ุงูุชูุถูุญู ูุชุนุฏููู
ูุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด Whisper ูุฎุชููุฉุ ุฃู ููุทุฉ ุชูุชูุด TTS ูุฎุชููุฉุ ุฃู ุชุฎููู ูููุฏ ุฅุฎุฑุงุฌ ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูุงุชุจุน ุงููุตุงุฆุญ ุงูููุฏูุฉ ููุชุฑุฌูุฉ ุฅูู ุงููุบุฉ ุงูุชู ุชุฎุชุงุฑูุง!

## ุงูุฎุทูุงุช ุงููุงุฏูุฉ

ุนูู ุงูุฑุบู ูู ุฃู ุงููุธุงู ุงููุชุณูุณู ูู ุทุฑููุฉ ูุนุงูุฉ ูู ุญูุซ ุงูุญุณุงุจ ูุงูุจูุงูุงุช ูุจูุงุก ูุธุงู STSTุ ุฅูุง ุฃูู ูุนุงูู ูู ูุดููุงุช ุงูุชุดุงุฑ ุงูุฃุฎุทุงุก ูุงูุฒูู ุงูุฅุถุงูู ุงูููุตููุฉ ุฃุนูุงู. ููุฏ ุงุณุชูุดูุช ุงูุฃุนูุงู ุงูุญุฏูุซุฉ ููุฌูุง *ูุจุงุดุฑูุง* ูู STSTุ ููู ููุฌ ูุง ูุชูุจุฃ ุจูุต ูุณูุท ููุญูู ูุจุงุดุฑุฉ ูู ุงูููุงู ุงููุตุฏุฑ ุฅูู ุงูููุงู ุงููุณุชูุฏู. ูุฐู ุงูุฃูุธูุฉ ูุงุฏุฑุฉ ุฃูุถูุง ุนูู ุงูุงุญุชูุงุธ ุจุฎุตุงุฆุต ุงููุชุญุฏุซ ุงููุตุฏุฑ ูู ุงูููุงู ุงููุณุชูุฏู (ูุซู ุงูุฅููุงุนุ ูุงูุทุจูุฉุ ูุงูุชูุบูู). ุฅุฐุง ููุช ููุชููุง ุจูุนุฑูุฉ ุงููุฒูุฏ ุนู ูุฐู ุงูุฃูุธูุฉุ ุชุญูู ูู ุงูููุงุฑุฏ ุงููุฏุฑุฌุฉ ูู ุงููุณู ุญูู [ุงููุฑุงุกุฉ ุงูุชูููููุฉ](supplemental_reading).