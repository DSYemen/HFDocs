# ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ููุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู

ูู ูุฐุง ุงููุณูุ ุณูุบุทู ููููุฉ ุงุณุชุฎุฏุงู `pipeline()` ููุงุณุชูุงุฏุฉ ูู ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ููุชุนุฑู ุนูู ุงูููุงู. ูู [ุงููุญุฏุฉ 2](../chapter2/asr_pipeline)ุ
ูููุง ุจุชูุฏูู `pipeline()` ูุทุฑููุฉ ุณููุฉ ูุชุดุบูู ููุงู ุงูุชุนุฑู ุนูู ุงูููุงูุ ูุน ูุนุงูุฌุฉ ูุง ูุจู ููุง ุจุนุฏ ุงูุชุดุบูู ุชุญุช ุงูุบุทุงุก
ูุงููุฑููุฉ ูุชุฌุฑุจุฉ ุฃู ููุทุฉ ุชูุชูุด ููุฏุฑุจุฉ ูุณุจููุง ุนูู ููุตุฉ Hugging Face Hub. ูู ูุฐู ุงููุญุฏุฉุ ุณูุฐูุจ ุฅูู
ูุณุชูู ุฃุนูู ูุงุณุชูุดุงู ุงูุฎุตุงุฆุต ุงููุฎุชููุฉ ูููุงุฐุฌ ุงูุชุนุฑู ุนูู ุงูููุงู ูููู ูููููุง ุงุณุชุฎุฏุงููุง ูููุงุฌูุฉ ูุฌููุนุฉ
ูู ุงูููุงู ุงููุฎุชููุฉ.

ููุง ูู ููุตู ูู ุงููุญุฏุฉ 3ุ ูุฅู ููุงุฐุฌ ุงูุชุนุฑู ุนูู ุงูููุงู ุชููุณู ุจุดูู ุนุงู ุฅูู ุฅุญุฏู ุงููุฆุชูู ุงูุชุงููุชูู:

1. ุงูุชุตููู ุงูุฒููู ุงูุงุชุตุงูู (CTC): ููุงุฐุฌ _ุงููุดูุฑ ููุท_ ูุน ุฑุฃุณ ุชุตููู ุฎุทู (CTC) ูู ุงูุฃุนูู
2. ุงูุชุณูุณู ุฅูู ุชุณูุณู (Seq2Seq): ููุงุฐุฌ _ุงููุดูุฑ-ุงููููู_ุ ูุน ุขููุฉ ุงูุงูุชุจุงู ุงููุชูุงุทุน ุจูู ุงููุดูุฑ ูุงููููู

ูุจู ุนุงู 2022ุ ูุงู CTC ูู ุงูุฃูุซุฑ ุดุนุจูุฉ ุจูู ุงูุจูููุชููุ ูุน ููุงุฐุฌ ุงููุดูุฑ ููุท ูุซู Wav2Vec2 ูHuBERT ูXLSR ุชุญููู
ุงูุงุฎุชุฑุงูุงุช ูู ูููุฐุฌ ูุง ูุจู ุงูุชุฏุฑูุจ / ุงูุถุจุท ุงูุฏููู ููููุงู. ูุงูุช ุงูุดุฑูุงุช ุงููุจุฑูุ ูุซู Meta ูMicrosoftุ ุจุชุฏุฑูุจ ูุณุจู
ูููุดูุฑ ุนูู ูููุงุช ูุงุฆูุฉ ูู ุจูุงูุงุช ุงูุตูุช ุบูุฑ ุงูููุนูููููุฉ ูุฃูุงู ุฃู ุฃุณุงุจูุน. ุจุนุฏ ุฐููุ ูููู ูููุณุชุฎุฏููู ุฃุฎุฐ ููุทุฉ ุชูุชูุด ููุฏุฑุจุฉ ูุณุจููุงุ ู
ุถุจุทูุง ุจุฏูุฉ ุจุฑุฃุณ CTC ุนูู 10 ุฏูุงุฆู ููุท ูู ุจูุงูุงุช ุงูููุงู ุงูููุนูููููุฉ ูุชุญููู ุฃุฏุงุก ููู ูู ูููุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ุงููุงุญูุฉ.

ููุน ุฐููุ ูุฅู ููุงุฐุฌ CTC ูุฏููุง ุฃูุฌู ูุตูุฑูุง. ูุคุฏู ุฅุถุงูุฉ ุทุจูุฉ ุฎุทูุฉ ุจุณูุทุฉ ุฅูู ูุดูุฑ ูุฅุนุทุงุก ูููุฐุฌ ุนุงู ุตุบูุฑ ูุณุฑูุนุ ููููู
ูุฏ ูููู ุนุฑุถุฉ ูุฃุฎุทุงุก ุงูุชูุฌุฆุฉ ุงูุตูุชูุฉ. ุณูููู ุจุชูุถูุญ ุฐูู ููููุฐุฌ Wav2Vec2 ุฃุฏูุงู.

## ูุญุต ููุงุฐุฌ CTC

ุฏุนูุง ูุญููู ููุชุทููุง ุตุบูุฑูุง ูู ูุฌููุนุฉ ุจูุงูุงุช [LibriSpeech ASR](hf-internal-testing/librispeech_asr_dummy) ูุชูุถูุญ
ูุฏุฑุงุช ูุณุฎ ุงูููุงู ููููุฐุฌ Wav2Vec2:

```python
from datasets import load_dataset

dataset = load_dataset(
    "hf-internal-testing/librispeech_asr_dummy", "clean", split="validation"
)
dataset
```

**ุงููุงุชุฌ:**
```
Dataset({
    features: ['file', 'audio', 'text', 'speaker_id', 'chapter_id', 'id'],
    num_rows: 73
})
```

ูููููุง ุงุฎุชูุงุฑ ูุงุญุฏุฉ ูู 73 ุนููุฉ ุตูุชูุฉ ููุญุต ุงูุนููุฉ ุงูุตูุชูุฉ ููุฐูู ุงููุณุฎ:

```python
from IPython.display import Audio

sample = dataset[2]

print(sample["text"])
Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```
**ุงููุงุชุฌ:**
```
HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAS AND ROAST BEEF LOOMING BEFORE US SIMILES DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
```

ุญุณููุง! ุนูุฏ ุงููููุงุฏ ููุญู ุงูุจูุฑ ุงููุดููุ ูุจุฏู ุฑุงุฆุนูุง! ๐ ุจุนุฏ ุงุฎุชูุงุฑ ุนููุฉ ุงูุจูุงูุงุชุ ูููู ุงูุขู ุจุชุญููู ููุทุฉ ุชูุชูุด ูุถุจูุทุฉ ุจุฏูุฉ ูู
`pipeline()`. ููุฐุงุ ุณูุณุชุฎุฏู ููุทุฉ ุงูุชูุชูุด ุงูุฑุณููุฉ [Wav2Vec2 base](facebook/wav2vec2-base-100h) ุงููุถุจูุทุฉ ุจุฏูุฉ ุนูู
100 ุณุงุนุฉ ูู ุจูุงูุงุช LibriSpeech:

```python
from transformers import pipeline

pipe = pipeline("automatic-speech-recognition", model="facebook/wav2vec2-base-100h")
```

ุจุนุฏ ุฐููุ ุณูุฃุฎุฐ ูุซุงููุง ูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูููุฑุฑ ุจูุงูุงุชู ุงูุฎุงู ุฅูู ุฎุท ุงูุฃูุงุจูุจ. ูุธุฑูุง ูุฃู `pipeline` *ุชุณุชููู* ุฃู
ูุงููุณ ูููู ุจุชูุฑูุฑู (ููุง ูุนูู ุฃูู ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู)ุ ุณููุฑุฑ ูุณุฎุฉ ูู ุงูุจูุงูุงุช. ุจูุฐู ุงูุทุฑููุฉุ ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุจุฃูุงู
ููุณ ุงูุนููุฉ ุงูุตูุชูุฉ ูู ุงูุฃูุซูุฉ ุงูุชุงููุฉ:

```python
pipe(sample["audio"].copy())
```
**ุงููุงุชุฌ:**
```
{"text": "HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAUS AND ROSE BEEF LOOMING BEFORE US SIMALYIS DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND"}
```

ูููููุง ุฃู ูุฑู ุฃู ูููุฐุฌ Wav2Vec2 ูููู ุจุนูู ุฌูุฏ ุฅูู ุญุฏ ูุง ูู ูุณุฎ ูุฐู ุงูุนููุฉ - ูู ุงููุธุฑุฉ ุงูุฃููู ูุจุฏู ุตุญูุญูุง ุจุดูู ุนุงู.
ุฏุนูุง ูุถุน ุงููุฏู ูุงูุชูุจุค ุฌูุจูุง ุฅูู ุฌูุจ ููุจุฑุฒ ุงูุงุฎุชูุงูุงุช:

```
ุงููุฏู:      HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAS AND ROAST BEEF LOOMING BEFORE US SIMILES DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
ุงูุชูุจุค:  HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH **CHRISTMAUS** AND **ROSE** BEEF LOOMING BEFORE US **SIMALYIS** DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
```

ุนูุฏ ููุงุฑูุฉ ุงููุต ุงููุณุชูุฏู ุจุงููุต ุงููุชูุจุฃ ุจูุ ูููููุง ุฃู ูุฑู ุฃู ุฌููุน ุงููููุงุช _ุชููุทู_ ุจุดูู ุตุญูุญุ ูููู ุจุนุถูุง ููุณ ููุชูุจูุง ุจุฏูุฉ. ุนูู ุณุจูู ุงููุซุงู:

* _CHRISTMAUS_vs_CHRISTMAS_
* _ROSE_vs_ROAST_
* _SIMALYIS_vs_SIMILES_

ูุฐุง ูุณูุท ุงูุถูุก ุนูู ูุตูุฑ ูููุฐุฌ CTC. ูููุฐุฌ CTC ูู ูู ุงูุฃุณุงุณ ูููุฐุฌ 'ุตูุชู ููุท': ูุชููู ูู ูุดูุฑ
ุงูุฐู ูุดูู ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูู ุฅุฏุฎุงูุงุช ุงูุตูุชุ ูุทุจูุฉ ุฎุทูุฉ ุชููู ุจุชุนููู ุงูุญุงูุงุช ุงููุฎููุฉ ุฅูู ุฃุญุฑู:

<!--- ูุญุชุงุฌ ุฅูู U3 ูุฏูุฌูุง ูุจู ุชููุฑ ูุฐุง ุงูุฑูู:

<div class="flex justify-center">
     <img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/wav2vec2-ctc.png" alt="ูุญูู ุงูุชุฑููุฒ ูุน ุฑุฃุณ CTC ูู ุงูุฃุนูู">
</div>

--->

ูุฐุง ูุนูู ุฃู ุงููุธุงู ูุนุชูุฏ ุจุดูู ุดุจู ูุงูู ูู ุชูุจุคุงุชู ุนูู ุงูุฅุฏุฎุงู ุงูุตูุชู ุงูุฐู ุชู ููุญู ูู (ุงูุฃุตูุงุช ุงูุตูุชูุฉ ููุตูุช)ุ
ููุฐูู ูููู ุฅูู ููู ุงูุตูุช ุจุทุฑููุฉ ุตูุชูุฉ (ูุซู _CHRISTMAUS_). ุฅูู ูุนุทู ุฃูููุฉ ุฃูู
ุณูุงู ุงูููุฐุฌุฉ ุงููุบููุฉ ููุญุฑูู ุงูุณุงุจูุฉ ูุงููุงุญูุฉุ ูุจุงูุชุงูู ููู ุนุฑุถุฉ ูุฃุฎุทุงุก ุงูุชูุฌุฆุฉ ุงูุตูุชูุฉ. ูููุฐุฌ ุฃูุซุฑ ุฐูุงุกู
ุณูุญุฏุฏ ุฃู _CHRISTMAUS_ ููุณุช ูููุฉ ุตุญูุญุฉ ูู ุงูููุฑุฏุงุช ุงูุฅูุฌููุฒูุฉุ ููุตุญุญูุง ุฅูู _CHRISTMAS_ ุนูุฏ ุฅุฌุฑุงุก
ุชูุจุคุงุชู. ููุง ุฃููุง ููุชูุฏ ููุฒุชูู ูุจูุฑุชูู ูู ุชูุจุคุงุชูุง - ุงูุญุฑูู ุงููุจูุฑุฉ ูุนูุงูุงุช ุงูุชุฑููู - ููุง ูุญุฏ ูู ูุงุฆุฏุฉ
ูุตูุต ุงููููุฐุฌ ูู ุงูุชุทุจููุงุช ุงููุงูุนูุฉ.

## ุงูุชุฎุฑุฌ ุฅูู Seq2Seq

ูููุฐุฌ Seq2Seq! ููุง ูู ููุถุญ ูู ุงููุญุฏุฉ 3ุ ุชุชููู ููุงุฐุฌ Seq2Seq ูู ูุดูุฑ ููู ุชุดููุฑ ูุฑุชุจุทูู ุนุจุฑ ุขููุฉ ุงูุงูุชูุงู ุงููุชูุงุทุน. ููุนุจ ุงููุดูุฑ ููุณ ุงูุฏูุฑ ููุง ูุงู ูู ูุจูุ ุญูุซ ูุญุณุจ ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูุฅุฏุฎุงูุงุช ุงูุตูุชุ ุจูููุง ููุนุจ ูู ุงูุชุดููุฑ
ุฏูุฑ ูููุฐุฌ ุงููุบุฉ. ูููู ูู ุงูุชุดููุฑ ุจูุนุงูุฌุฉ ุชุณูุณู ูุงูู ูู ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ
ูู ุงููุดูุฑ ูููุดุฆ ุงููุตูุต ุงูููุงุจูุฉ. ูุน ุงูุณูุงู ุงูุนุงููู ูุฅุฏุฎุงู ุงูุตูุชุ ูููู ููู ุงูุชุดููุฑ
ุงุณุชุฎุฏุงู ุณูุงู ููุฐุฌุฉ ุงููุบุฉ ุฃุซูุงุก ุฅุฌุฑุงุก ุชูุจุคุงุชูุ ูุชุตุญูุญ ุฃุฎุทุงุก ุงูุชูุฌุฆุฉ ุฃุซูุงุก ุงูุชููู ูุจุงูุชุงูู
ุชุฌูุจ ูุดููุฉ ุงูุชูุจุคุงุช ุงูุตูุชูุฉ.

ููุงู ุฌุงูุจุงู ุณูุจูุงู ูููุงุฐุฌ Seq2Seq:
1. ุฅููุง ุฃุจุทุฃ ุจุดูู ูุชุฃุตู ูู ูู ุงูุชุดููุฑุ ุญูุซ ุชุญุฏุซ ุนูููุฉ ูู ุงูุชุดููุฑ ุฎุทูุฉ ุจุฎุทูุฉุ ุจุฏูุงู ูู ุญุฏูุซูุง ุฌููุนูุง ูุฑุฉ ูุงุญุฏุฉ
2. ุฅููุง ุฃูุซุฑ ุฌูุนูุง ููุจูุงูุงุชุ ูุชุชุทูุจ ูููุฉ ุฃูุจุฑ ุจูุซูุฑ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ูููุตูู ุฅูู ุงูุชูุงุฑุจ

ุนูู ูุฌู ุงูุฎุตูุตุ ุงูุญุงุฌุฉ ุฅูู ูููุงุช ูุจูุฑุฉ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ูุงูุช ุนูู ุงูุฒุฌุงุฌุฉ ูู ุชูุฏู ููุฏุณุฉ Seq2Seq ูู
ุงูููุงู. ูู ุงูุตุนุจ ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูููุงู ุงููุณููุ ูุน ุฃูุจุฑ ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูููุณููุฉ ูู ุฐูู ุงูููุช ุชุณุฌูู 10,000 ุณุงุนุฉ ููุท. ุชุบูุฑ ูู ูุฐุง ูู ุนุงู 2022 ูุน ุฅุตุฏุงุฑ **Whisper**. Whisper ูู ูููุฐุฌ ูุณุจู ุงูุชุฏุฑูุจ ููุชุนุฑู ุนูู ุงูููุงู
ููุดุฑ ูู [ุณุจุชูุจุฑ 2022](https://openai.com/blog/whisper/) ูู ูุจู ุงููุคูููู Alec Radford et al. ูู OpenAI. ุนูู ุนูุณ
ุณุงุจูุชูุง CTCุ ุงูุชู ุชู ุชุฏุฑูุจูุง ูุณุจููุง ุจุงููุงูู ุนูู ุจูุงูุงุช ุตูุชูุฉ **ุบูุฑ ููุณููุฉ**ุ ุชู ุชุฏุฑูุจ Whisper ูุณุจููุง ุนูู ูููุฉ ูุจูุฑุฉ ูู
ุจูุงูุงุช ุงููุตูุต ุงูุตูุชูุฉ **ุงูููุณููุฉ**ุ 680,000 ุณุงุนุฉ ุนูู ูุฌู ุงูุฏูุฉ.

ูุฐุง ูู ุฃูุซุฑ ูู ุนุดุฑุฉ ุฃุถุนุงู ุงูุจูุงูุงุช ูู ุจูุงูุงุช ุงูุตูุช ุบูุฑ ุงูููุณููุฉ ุงููุณุชุฎุฏูุฉ ูุชุฏุฑูุจ Wav2Vec 2.0 (60,000 ุณุงุนุฉ). ูุง ูู
ุฃูุซุฑ ูู ุฐููุ 117,000 ุณุงุนุฉ ูู ุจูุงูุงุช ูุง ูุจู ุงูุชุฏุฑูุจ ูุฐู ูู ุจูุงูุงุช ูุชุนุฏุฏุฉ ุงููุบุงุช (ุฃู "ุบูุฑ ุงูุฅูุฌููุฒูุฉ"). ููุชุฌ ุนู ุฐูู ููุงุท ุชูุชูุด ูููู ุชุทุจูููุง ุนูู
ุฃูุซุฑ ูู 96 ูุบุฉุ ูุนุชุจุฑ ุงููุซูุฑ ูููุง _ููุฎูุถุฉ ุงูููุงุฑุฏ_ุ ููุง ูุนูู ุฃู ุงููุบุฉ ุชูุชูุฑ ุฅูู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุงูููุงุณุจุฉ ููุชุฏุฑูุจ.

ุนูุฏ ุงูุชูุณุน ุฅูู 680,000 ุณุงุนุฉ ูู ุจูุงูุงุช ูุง ูุจู ุงูุชุฏุฑูุจ ุงูููุณููุฉุ ุชูุธูุฑ ููุงุฐุฌ Whisper ูุฏุฑุฉ ูููุฉ ุนูู ุงูุชุนููู
ุนูู ุงูุนุฏูุฏ ูู ูุฌููุนุงุช ุงูุจูุงูุงุช ูุงููุฌุงูุงุช. ุชุญูู ููุงุท ุงูุชูุชูุด ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ูุชุงุฆุฌ ุชูุงูุณูุฉ ูุฃูุธูุฉ ุงูุฃูุงุจูุจ ุงููุชูุฏูุฉุ ูุน
ูุง ููุฑุจ ูู 3% ูู ูุนุฏู ุฎุทุฃ ุงููููุฉ (WER) ุนูู ุงููุฌููุนุฉ ุงููุฑุนูุฉ test-clean ูู LibriSpeech pipe ููุชูุฌุฉ ุฌุฏูุฏุฉ ูุชูุฏูุฉ ุนูู TED-LIUM ูุน
4.7% WER (_c.f._ ุงูุฌุฏูู 8 ูู [ูุฑูุฉ Whisper](https://cdn.openai.com/papers/whisper.pdf)).

ูู ุงูููู ุจุดูู ุฎุงุต ูุฏุฑุฉ Whisper ุนูู ุงูุชุนุงูู ูุน ุนููุงุช ุงูุตูุช ุงูุทูููุฉุ ููุชุงูุชูุง ุถุฏ ุถูุถุงุก ุงูุฅุฏุฎุงู ูุงููุฏุฑุฉ
ูุชูุจุค ุงููุตูุต ุงููุญุฑู ูุงููุดูู. ูุฐุง ูุฌุนููุง ูุฑุดุญูุง ูุงุจูุงู ููุชุทุจูู ูุฃูุธูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ูู ุงูุนุงูู ุงูุญูููู.

ุณูุจูู ูู ุจููุฉ ูุฐุง ุงููุณู ููููุฉ ุงุณุชุฎุฏุงู ููุงุฐุฌ Whisper ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ููุชุนุฑู ุนูู ุงูููุงู ุจุงุณุชุฎุฏุงู ๐ค
ุงููุญููุงุช. ูู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุชุ ุชููู ููุงุท ุงูุชูุชูุด ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ุนุงููุฉ ุงูุฃุฏุงุก ูุชุนุทู ูุชุงุฆุฌ ุฑุงุฆุนุฉุ
ูุฐูู ูุดุฌุนู ุนูู ุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ููุงุท ุงูุชูุชูุด ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ูุฎุทูุฉ ุฃููู ูุญู ุฃู ูุดููุฉ ูู ุงูุชุนุฑู ุนูู ุงูููุงู.
ูู ุฎูุงู ุงูุถุจุท ุงูุฏูููุ ูููู ุชูููู ููุงุท ุงูุชูุชูุด ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ููุฌููุนุงุช ุจูุงูุงุช ููุบุงุช ูุญุฏุฏุฉ ูุชุญุณูู
ูุฐู ุงููุชุงุฆุฌ. ุณูููู ุจุชูุถูุญ ููููุฉ ุงูููุงู ุจุฐูู ูู ุงููุณู ุงููุฑุนู ุงููุงุฏู ุญูู [ุงูุถุจุท ุงูุฏููู](fine-tuning).

ุชุฃุชู ููุงุท ุชูุชูุด Whisper ุจุฎูุณุฉ ุชููููุงุช ุจุฃุญุฌุงู ููุงุฐุฌ ูุชููุนุฉ. ูุชู ุชุฏุฑูุจ ุงูุฃุฑุจุนุฉ ุงูุฃุตุบุฑ ุฅูุง
ุนูู ุจูุงูุงุช ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ููุท ุฃู ุจูุงูุงุช ูุชุนุฏุฏุฉ ุงููุบุงุช. ููุทุฉ ุงูุชูุชูุด ุงูุฃูุจุฑ ูู ูุชุนุฏุฏุฉ ุงููุบุงุช ููุท. ุฌููุน ููุงุท ุงูุชูุชูุด ุงูุชุณุนุฉ ุงููุณุจูุฉ ุงูุชุฏุฑูุจ
ูุชููุฑุฉ ุนูู [Hub Hugging Face](https://huggingface.co/models?search=openai/whisper). ูุชู ุชูุฎูุต ููุงุท ุงูุชูุชูุด
ูู ุงูุฌุฏูู ุงูุชุงูู ูุน ุฑูุงุจุท ุฅูู ุงูููุงุฐุฌ ุนูู Hub. ูุดูุฑ "VRAM" ุฅูู ุฐุงูุฑุฉ GPU ุงููุทููุจุฉ ูุชุดุบูู
ุงููููุฐุฌ ุจุญุฌู ุงูุฏูุนุฉ ุงูุฃุฏูู 1. "Rel Speed" ูู ุงูุณุฑุนุฉ ุงููุณุจูุฉ ูููุทุฉ ุชูุชูุด ููุงุฑูุฉ ุจุฃูุจุฑ ูููุฐุฌ.
ุจูุงุกู ุนูู ูุฐู ุงููุนูููุงุชุ ููููู ุชุญุฏูุฏ ููุทุฉ ุชูุชูุด ุชูุงุณุจ ุฃุฌูุฒุชู ุจุดูู ุฃูุถู.

| ุงูุญุฌู   | ุงููุนููุงุช | VRAM / GB | Rel Speed | ุงูุฅูุฌููุฒูุฉ ููุท                                         | ูุชุนุฏุฏ ุงููุบุงุช                                        |
|--------|------------|-----------|-----------|------------------------------------------------------|-----------------------------------------------------|
| ุตุบูุฑ   | 39 M       | 1.4       | 32        | [โ](https://huggingface.co/openai/whisper-tiny.en)   | [โ](https://huggingface.co/openai/whisper-tiny)     |
| ูุงุนุฏุฉ   | 74 M       | 1.5       | 16        | [โ](https://huggingface.co/openai/whisper-base.en)   | [โ](https://huggingface.co/openai/whisper-base)     |
| ุตุบูุฑ  | 244 M      | 2.3       | 6         | [โ](https://huggingface.co/openai/whisper-small.en)  | [โ](https://huggingface.co/openai/whisper-small)    |
| ูุชูุณุท | 769 M      | 4.2       | 2         | [โ](https://huggingface.co/openai/whisper-medium.en) | [โ](https://huggingface.co/openai/whisper-medium)   |
| ูุจูุฑ  | 1550 M     | 7.5       | 1         | x                                                    | [โ](https://huggingface.co/openai/whisper-large-v2) |

ุฏุนูุง ูุญูู ููุทุฉ ุชูุชูุด [Whisper Base](https://huggingface.co/openai/whisper-base)ุ ูุงูุชู ููุง ุญุฌู ูุดุงุจู
ููุทุฉ ุชูุชูุด Wav2Vec2 ุงูุชู ุงุณุชุฎุฏููุงูุง ุณุงุจููุง. ุชููุนูุง ูุงูุชูุงููุง ุฅูู ุงูุชุนุฑู ุนูู ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุชุ ุณูููู ุจุชุญููู ูุชุนุฏุฏ ุงููุบุงุช
ูุชุบูุฑ ููุทุฉ ุชูุชูุด ุงููุงุนุฏุฉ. ุณูููู ุฃูุถูุง ุจุชุญููู ุงููููุฐุฌ ุนูู GPU ุฅุฐุง ูุงู ูุชุงุญูุงุ ุฃู CPU ุจุฎูุงู ุฐูู. ุณูููู `pipeline()`
ุจุนุฏ ุฐูู ุณูุชู ููู ุฌููุน ุงูุฅุฏุฎุงูุงุช / ุงูุฅุฎุฑุงุฌ ูู CPU ุฅูู GPU ุญุณุจ ุงูุญุงุฌุฉ:

```python
import torch
from transformers import pipeline

device = "cuda:0" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
    "automatic-speech-recognition", model="openai/whisper-base", device=device
)
```

ุฑุงุฆุน! ุงูุขู ุฏุนูุง ูููู ุงูุตูุช ููุง ูู ุงูุญุงู ูู ูุจู. ุงูุชุบููุฑ ุงููุญูุฏ ุงูุฐู ูุฌุฑูู ูู ุชูุฑูุฑ ุญุฌุฉ ุฅุถุงููุฉุ `max_new_tokens`ุ
ุงูุฐู ูุฎุจุฑ ุงููููุฐุฌ ุจุงูุนุฏุฏ ุงูุฃูุตู ูู ุงูุฑููุฒ ุงูุชู ุณูุชู ุฅูุดุงุคูุง ุนูุฏ ุฅุฌุฑุงุก ุชูุจุคู:

```python
pipe(sample["audio"], max_new_tokens=256)
```
**ุงูุฅุฎุฑุงุฌ:**
```
{'text': ' He tells us that at this festive season of the year, with Christmas and roast beef looming before us, similarly is drawn from eating and its results occur most readily to the mind.'}
```

ุณูู ุจูุง ููู ุงูููุงูุฉ! ุฃูู ุดูุก ุณุชูุงุญุธู ูู ูุฌูุฏ ุงูุญุฑูู ุงููุจูุฑุฉ ูุนูุงูุงุช ุงูุชุฑููู. ุนูู ุงูููุฑ ูุฌุนู ูุฐุง ุงููุต
ุฃุณูู ูู ุงููุฑุงุกุฉ ููุงุฑูุฉ ุจุงููุต ุบูุฑ ุงููุญุฑู ูุบูุฑ ุงููุดูู ูู Wav2Vec2. ุฏุนูุง ูุถุน ุงููุต
ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุงููุฏู:

```
ุงููุฏู: ูุฎุจุฑูุง ุฃูู ูู ูุฐุง ุงูููุณู ุงูุงุญุชูุงูู ูู ุงูุนุงูุ ูุน ุนูุฏ ุงููููุงุฏ ููุญู ุงูุจูุฑ ุงููุดูู ูููุญุงู ุฃูุงููุงุ ุชูุณุชุญุถุฑ ุงูุงุจุชุณุงูุงุช ูู ุงูุฃูู ููุชุงุฆุฌู ุชุญุฏุซ ุจุณูููุฉ ูู ุงูุฐูู.
ุงูุชูุจุค: ูุฎุจุฑูุง ุฃูู ูู ูุฐุง ุงูููุณู ุงูุงุญุชูุงูู ูู ุงูุนุงูุ ูุน **ุนูุฏ ุงููููุงุฏ** ู**ุงููุญู ุงููุดูู** ูููุญุงู ุฃูุงููุงุ **ุงูุงุจุชุณุงูุงุช** ุชูุณุชุญุถุฑ ูู ุงูุฃูู ููุชุงุฆุฌู ุชุญุฏุซ ุจุณูููุฉ ูู ุงูุฐูู.
```

ูุงู Whisper ุจุนูู ุฑุงุฆุน ูู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุตูุชูุฉ ุงูุชู ุฑุฃููุงูุง ูู Wav2Vec2 - ูู ูู _ุนูุฏ ุงููููุงุฏ_ ู _ุงููุญู ุงููุดูู_ ููุชูุจุงู ุจุดูู ุตุญูุญ. ููุงุญุธ ุฃู ุงููููุฐุฌ ูุง ูุฒุงู ููุงูุญ ูุน _SIMILES_ุ ุญูุซ ุชู ููููุง ุจุดูู ุบูุฑ ุตุญูุญ ุนูู ุฃููุง _similarly_ุ ูููู ูุฐู ุงููุฑุฉ ุงูุชูุจุค ูู ูููุฉ ุตุญูุญุฉ ูู ุงูููุฑุฏุงุช ุงูุฅูุฌููุฒูุฉ. ุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด Whisper ุฃูุจุฑ ูููู ุฃู ูุณุงุนุฏ ูู ุชูููู ุฃุฎุทุงุก ุงููุณุฎุ ุนูู ุญุณุงุจ ุงูุญุงุฌุฉ ุฅูู ุงููุฒูุฏ ูู ุงูุญุณุงุจุงุช ูููุช ุงููุณุฎ ุงูุฃุทูู.

ููุฏ ููุนุฏูุง ุจูููุฐุฌ ููููู ุงูุชุนุงูู ูุน 96 ูุบุฉุ ูุฐุง ุฏุนููุง ูุชุฑู ุงูุชุนุฑู ุนูู ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุงูุขู ููุฐูุจ ุฅูู ุงูุนุงูููุฉ ๐! ูุฌููุนุฉ ุจูุงูุงุช [Multilingual LibriSpeech](https://huggingface.co/datasets/facebook/multilingual_librispeech) (MLS) ูู ุงููุนุงุฏู ูุชุนุฏุฏ ุงููุบุงุช ููุฌููุนุฉ ุจูุงูุงุช LibriSpeechุ ูุน ุจูุงูุงุช ุตูุชูุฉ ูุนูููุฉ ุจุณุช ูุบุงุช. ุณูููู ุจุชุญููู ุนููุฉ ูุงุญุฏุฉ ูู ุงููุณู ุงูุฅุณุจุงูู ููุฌููุนุฉ ุจูุงูุงุช MLSุ ูุน ุงูุงุณุชูุงุฏุฉ ูู ูุถุน _ุงูุชุดุบูู_ ุจุญูุซ ูุง ูุถุทุฑ ุฅูู ุชูุฒูู ุงููุฌููุนุฉ ุงููุงููุฉ:

```python
dataset = load_dataset(
    "facebook/multilingual_librispeech", "spanish", split="validation", streaming=True
)
sample = next(iter(dataset))
```

ูุฑุฉ ุฃุฎุฑูุ ุณููุญุต ุงููุณุฎุฉ ุงููุตูุฉ ููุณุชูุน ุฅูู ุงูุฌุฒุก ุงูุตูุชู:

```python
print(sample["text"])
Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```
**ุงููุงุชุฌ:**
```
entonces te delelitarรกs en jehovรก y yo te harรฉ subir sobre las alturas de la tierra y te darรฉ รก comer la heredad de jacob tu padre porque la boca de jehovรก lo ha hablado
```

ูุฐุง ูู ุงููุต ุงููุณุชูุฏู ุงูุฐู ูุณุนู ุฅููู ูุน ูุณุฎุฉ Whisper. ุนูู ุงูุฑุบู ูู ุฃููุง ูุนูู ุงูุขู ุฃูู ูููููุง
ุฑุจูุง ููุนู ุฃูุถู ูู ูุฐุงุ ูุฃู ูููุฐุฌูุง ุณูููู ุฃูุถูุง ุจุงูุชูุจุค ุจุนูุงูุงุช ุงูุชุฑููู ูุงูุญุงูุฉุ ููุง ููุฌุฏ ุฃู ููููุง ูู
ุงููุฑุฌุน. ุฏุนูุง ูุฑุณู ุงูุนููุฉ ุงูุตูุชูุฉ ุฅูู ุงูุฃูุจูุจ ููุญุตูู ุนูู ุชูุจุค ุงููุต ูุฏููุง. ุดูุก ูุงุญุฏ ูุฌุจ ููุงุญุธุชู ูู ุฃู
ุชุณุชููู ุงูุฃูุงุจูุจ _ูุงููุณ_ ุฅุฏุฎุงูุงุช ุงูุตูุช ุงูุชู ูุฏุฎููุงุ ููุง ูุนูู ุฃูู ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงููุงููุณ. ููุชุญุงูู
ุนูู ูุฐุงุ ุณููุฑุฑ _ูุณุฎุฉ_ ูู ุงูุนููุฉ ุงูุตูุชูุฉุ ุจุญูุซ ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ููุณ ุงูุนููุฉ ุงูุตูุชูุฉ ูู ุงูุฃูุซูุฉ ุงูุชุงููุฉ
ุงูุดูุฑุฉ:

```python
pipe(sample["audio"].copy(), max_new_tokens=256, generate_kwargs={"task": "transcribe"})
```
**ุงููุงุชุฌ:**
```
{'text': ' Entonces te deleitarรกs en Jehovรก y yo te harรฉ subir sobre las alturas de la tierra y te darรฉ a comer la heredad de Jacob tu padre porque la boca de Jehovรก lo ha hablado.'}
```

ุฑุงุฆุน - ูุจุฏู ูุฐุง ูุดุงุจููุง ุฌุฏูุง ููุตูุง ุงููุฑุฌุนู (ุฑุจูุง ุฃูุถู ูุฃูู ูุญุชูู ุนูู ุนูุงูุงุช ุงูุชุฑููู ูุงูุญุงูุฉ!). ุณุชูุงุญุธ
ุฃููุง ูุฏููุง ุงููุต `"task"` ูู _generate key-word argument_ (generate kwarg). ุชุนููู `"task"` ุฅูู `"transcribe"`
ูุฌุจุฑ Whisper ุนูู ุฃุฏุงุก ูููุฉ _ุงูุชุนุฑู ุนูู ุงูููุงู_ุ ุญูุซ ูุชู ูุณุฎ ุงูุตูุช ุจููุณ ุงููุบุฉ
ุชู ุงูุชุญุฏุซ ุจุงูููุงู. Whisper ูุงุฏุฑ ุฃูุถูุง ุนูู ุฃุฏุงุก ุงููููุฉ ุฐุงุช ุงูุตูุฉ ุงููุซููุฉ _ุงูุชุฑุฌูุฉ ุงูููุงููุฉ_ุ ุญูุซ
ูููู ุชุฑุฌูุฉ ุงูุตูุช ุจุงููุบุฉ ุงูุฅุณุจุงููุฉ ุฅูู ูุต ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ูุชุญููู ุฐููุ ูุญุฏุฏ `"task"` ุฅูู `"translate"`:

```python
pipe(sample["audio"], max_new_tokens=256, generate_kwargs={"task": "translate"})
```
**ุงููุงุชุฌ:**
```
{'text': ' So you will choose in Jehovah and I will raise you on the heights of the earth and I will give you the honor of Jacob to your father because the voice of Jehovah has spoken to you.'}
```

ุงูุขู ุจุนุฏ ุฃู ุนูููุง ุฃูู ูููููุง ุงูุชุจุฏูู ุจูู ุงูุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ ุงูููุงููุฉุ ูููููุง ุงุฎุชูุงุฑ ูููุชูุง ุญุณุจ ุงุญุชูุงุฌุงุชูุง. ุฅูุง ุฃู ูุชุนุฑู ุนูู ุงูุตูุช ุจุงููุบุฉ X ุฅูู ูุต ุจุงููุบุฉ ููุณูุง X (ุนูู ุณุจูู ุงููุซุงูุ ุงูุตูุช ุงูุฅุณุจุงูู ุฅูู ุงููุต ุงูุฅุณุจุงูู)ุ
ุฃู ูุชุฑุฌู ูู ุงูุตูุช ุจุฃู ูุบุฉ X ุฅูู ูุต ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ (ุนูู ุณุจูู ุงููุซุงูุ ุงูุตูุช ุงูุฅุณุจุงูู ุฅูู ุงููุต ุงูุฅูุฌููุฒู).

ููุฑุงุกุฉ ุงููุฒูุฏ ุญูู ููููุฉ ุงุณุชุฎุฏุงู ุญุฌุฉ "task" ููุชุญูู ูู ุฎุตุงุฆุต ุงููุต ุงููููุฏุ ุฑุงุฌุน
[ุจุทุงูุฉ ุงููููุฐุฌ](https://huggingface.co/openai/whisper-base#usage) ููููุฐุฌ Whisper ุงูุฃุณุงุณู.

## ุงููุณุฎ ุงูุทููู ูุงูุทูุงุจุน ุงูุฒูููุฉ

ุญุชู ุงูุขูุ ุฑูุฒูุง ุนูู ูุณุฎ ุนููุงุช ุตูุชูุฉ ูุตูุฑุฉ ุชูู ุนู 30 ุซุงููุฉ. ุฐูุฑูุง ุฃู ุฃุญุฏ ุนูุงูู ุงูุฌุฐุจ
ูุงู Whisper ูุฏุฑุชู ุนูู ุงูุนูู ุนูู ุนููุงุช ุตูุชูุฉ ุทูููุฉ. ุณูุชูุงูู ูุฐู ุงููููุฉ ููุง!

ุฏุนูุง ููุดุฆ ููู ุตูุชู ุทููู ุนู ุทุฑูู ุฏูุฌ ุนููุงุช ูุชุชุงููุฉ ูู ูุฌููุนุฉ ุจูุงูุงุช MLS. ูุธุฑูุง ูุฃู ูุฌููุนุฉ ุจูุงูุงุช MLS
ูุชู ุฅูุดุงุคู ุนู ุทุฑูู ุชูุณูู ุชุณุฌููุงุช ุงููุชุจ ุงูุตูุชูุฉ ุงูุทูููุฉ ุฅูู ููุงุทุน ุฃูุตุฑุ ูุฅู ุฏูุฌ ุงูุนููุงุช ูู ุฃุญุฏ ุงูุทุฑู ูุฅุนุงุฏุฉ ุจูุงุก
ููุงุทุน ุงููุชุจ ุงูุตูุชูุฉ ุงูุฃุทูู. ูุจุงูุชุงููุ ูุฌุจ ุฃู ูููู ุงูุตูุช ุงููุงุชุฌ ูุชูุงุณููุง ุนุจุฑ ุงูุนููุฉ ุจุฃููููุง.

ุณูุญุฏุฏ ุทูู ุงูุตูุช ุงููุณุชูุฏู ูุฏููุง ุฅูู 5 ุฏูุงุฆูุ ูุณูุชููู ุนู ุฏูุฌ ุงูุนููุงุช ุจูุฌุฑุฏ ุฃู ูุตู ุฅูู ูุฐู ุงููููุฉ:

```python
import numpy as np

target_length_in_m = 5

# ุชุญููู ูู ุฏูุงุฆู ุฅูู ุซูุงูู (* 60) ุฅูู ุนุฏุฏ ุงูุนููุงุช (* ูุนุฏู ุงูุนููุฉ)
sampling_rate = pipe.feature_extractor.sampling_rate
target_length_in_samples = target_length_in_m * 60 * sampling_rate

# ูู ุจุงูุชููู ุนุจุฑ ูุฌููุนุฉ ุงูุจูุงูุงุช ุงููุชุฏููุฉ ูุฏููุงุ ูุฏูุฌ ุงูุนููุงุช ุญุชู ูุตู ุฅูู ุงููุฏู
long_audio = []
for sample in dataset:
    long_audio.extend(sample["audio"]["array"])
    if len(long_audio) > target_length_in_samples:
        break

long_audio = np.asarray(long_audio)

# ููู ูุงู ุฃุฏุงุคูุงุ
seconds = len(long_audio) / 16000
minutes, seconds = divmod(seconds, 60)
print(f"Length of audio sample is {minutes} minutes {seconds:.2f} seconds")
```
**ุงููุงุชุฌ:**
```
Length of audio sample is 5.0 minutes 17.22 seconds
```

ุญุณููุง! 5 ุฏูุงุฆู ู 17 ุซุงููุฉ ูู ุงูุตูุช ูููุณุฎ. ููุงู ูุดููุชุงู ูู ุฅุฑุณุงู ูุฐุง ุงูููู ุงูุตูุชู ุงูุทููู
ูุจุงุดุฑุฉ ุฅูู ุงููููุฐุฌ:
1. Whisper ูุตูู ุจุดูู ุฃุณุงุณู ููุนูู ูุน ุนููุงุช ูุฏุชูุง 30 ุซุงููุฉ: ูุชู ููุก ุฃู ุดูุก ุฃูุตุฑ ูู 30 ุซุงููุฉ ุจุงูุตูุช ุฅูู 30 ุซุงููุฉุ ููุชู ุงูุชุทุงุน ุฃู ุดูุก ุฃุทูู ูู 30 ุซุงููุฉ ุฅูู 30 ุซุงููุฉ ุนู ุทุฑูู ูุทุน ุงูุตูุช ุงูุฅุถุงููุ ูุฐุง ุฅุฐุง ูุฑุฑูุง ุจุงูุตูุช ูุจุงุดุฑุฉุ ููู ูุญุตู ุฅูุง ุนูู ุงููุณุฎ ููู 30 ุซุงููุฉ ุงูุฃููู
2. ุงูุฐุงูุฑุฉ ูู ุดุจูุฉ ุงููุญูู ุชุชูุงุณุจ ูุน ุทูู ุงูุชุณูุณู ุงููุฑุจุน: ูุถุงุนูุฉ ุทูู ุงูุฅุฏุฎุงู ุชุถุงุนู ูุชุทูุจุงุช ุงูุฐุงูุฑุฉ ุฃุฑุจุน ูุฑุงุชุ ูุฐุง ูุฅู ุชูุฑูุฑ ูููุงุช ุตูุชูุฉ ุทูููุฉ ููุบุงูุฉ ุณูุคุฏู ุญุชููุง ุฅูู ุฎุทุฃ ูู ุงูุฐุงูุฑุฉ (OOM)

ุชุนูู ุงููุณุฎ ุงูุทูููุฉ ูู ๐ค Transformers ุนู ุทุฑูู _chunking_ ุงูุตูุช ุงููุฏุฎู ุฅูู ุดุฑุงุฆุญ ุฃุตุบุฑ ูุฃูุซุฑ ูุงุจููุฉ ููุฅุฏุงุฑุฉ.
ูุญุชูู ูู ููุทุน ุนูู ูููุฉ ุตุบูุฑุฉ ูู ุงูุชุฏุงุฎู ูุน ุงูููุทุน ุงูุณุงุจู. ูุณูุญ ููุง ูุฐุง ุจุฎูุงุทุฉ ุงูููุงุทุน ุจุฏูุฉ
ูู ุงูุญุฏูุฏุ ูุฃููุง ูููู ุฃู ูุฌุฏ ุงูุชุฏุงุฎู ุจูู ุงูููุงุทุน ูุฏูุฌ ุงููุณุฎ ููููุง ูุฐูู:

<div class="flex justify-center">
     <img src="https://huggingface.co/blog/assets/49_asr_chunking/Striding.png" alt="๐ค ุฎูุงุฑุฒููุฉ ุชุฌุฒุฆุฉ ุงููุญููุงุช. ุงููุตุฏุฑ: https://huggingface.co/blog/asr-chunking.">
</div>

ุชุชูุซู ููุฒุฉ ุชุฌุฒุฆุฉ ุงูุนููุงุช ูู ุฃููุง ูุง ูุญุชุงุฌ ุฅูู ูุชูุฌุฉ ุงูููุทุน \\( i \\) ููุณุฎ ุงูููุทุน ุงููุงุญู
\\( i + 1 \\). ุชุชู ุงูุฎูุงุทุฉ ุจุนุฏ ุฃู ูููุง ุจูุณุฎ ุฌููุน ุงูููุงุทุน ุนูู ุญุฏูุฏ ุงูููุทุนุ ูุฐุง ูุง ููู
ุงูุชุฑุชูุจ ุงูุฐู ูููู ุจูุณุฎ ุงูููุงุทุน ููู. ุงูุฎูุงุฑุฒููุฉ **ุจุฏูู ุญุงูุฉ**ุ ูุฐุง ูููููุง ุญุชู ุงูููุงู ุจุงูููุทุน \\( i + 1 \\)
ูู ููุณ ุงูููุช ูุซู ุงูููุทุน \\( i \\)! ูุณูุญ ููุง ูุฐุง _batch_ ุงูููุงุทุน ูุชุดุบูููุง ุนุจุฑ ุงููููุฐุฌ ุจุงูุชูุงุฒูุ
ุชูููุฑ ุชุณุฑูุน ุญูุณุจู ูุจูุฑ ููุงุฑูุฉ ุจูุณุฎูุง ุจุดูู ูุชุณูุณู. ููุฑุงุกุฉ ุงููุฒูุฏ ุญูู ุงูุชุฌุฒุฆุฉ ูู ๐ค Transformersุ
ููููู ุงูุฑุฌูุน ุฅูู ูุฐู [ุชุฏูููุฉ](https://huggingface.co/blog/asr-chunking).

ูุชูุดูุท ุงููุณุฎ ุงูุทูููุฉุ ูุฌุจ ุนูููุง ุฅุถุงูุฉ ุญุฌุฉ ุฅุถุงููุฉ ูุงุญุฏุฉ ุนูุฏ ุงุณุชุฏุนุงุก ุงูุฃูุจูุจ. ูุฐู ุงูุญุฌุฉุ
`chunk_length_s`ุ ูุชุญูู ูู ุทูู ุงูููุงุทุน ุงููุฌุฒุฃุฉ ุจุงูุซูุงูู. ุจุงููุณุจุฉ ุฅูู Whisperุ ุชููู ุงูููุงุทุน ุงูุชู ูุฏุชูุง 30 ุซุงููุฉ ูุซุงููุฉุ
ุญูุซ ูุชุทุงุจู ูุฐุง ูุน ุทูู ุงูุฅุฏุฎุงู ุงูุฐู ูุชููุนู Whisper.

ูุชูุดูุท ุงูุฏููุนุงุชุ ูุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุงูุญุฌุฉ `batch_size` ุฅูู ุงูุฃูุจูุจ. ูุนูุงุ ูููููุง ูุณุฎ ุงูุนููุฉ ุงูุตูุชูุฉ ุงูุทูููุฉ ูุน ุงูุชุฌุฒุฆุฉ ูุงูุฏูุนุงุช ุนูู ุงููุญู ุงูุชุงูู:

```python
pipe(
    long_audio,
    max_new_tokens=256,
    generate_kwargs={"task": "transcribe"},
    chunk_length_s=30,
    batch_size=8,
)
```
**ุงููุงุชุฌ:**
```
{'text': ' ุฅุฐุงู ุณุชูุฑุญ ุจุงูุฑุจุ ูุณุฃุฑูุนู ุฅูู ูุฑุชูุนุงุช ุงูุฃุฑุถุ ูุณุฃุนุทูู ุฃู ุชุฃูู ููุฑุงุซ ูุนููุจ ุฃุจููุ ูุฃู ูู ุงูุฑุจ ูุฏ ุชููู. ูุญู ุดูููุง. ูููุง ุถูููุง ูุซู ุงูุบููุ ูู ูุงุญุฏ ููุง ุงูุญุฑู ูู ุทุฑูููุ ููู ุงูุฑุจ ูุถุน ุนููู ุฅุซู ูู ูุงุญุฏ ููุง...'}
```

ูู ูุทุจุน ุงููุงุชุฌ ุจุฃูููู ููุง ูุฃูู ุทููู ุฌุฏูุง (312 ูููุฉ)! ุนูู ุจุทุงูุฉ ุฑุณููุงุช 16GB V100ุ ููููู ุฃู ุชุชููุน ุฃู ูุณุชุบุฑู ุงูุณุทุฑ ุฃุนูุงู ุญูุงูู 3.45 ุซุงููุฉ ููุชุดุบููุ ููู ุฌูุฏ ุฌุฏูุง ูุนููุฉ ุตูุชูุฉ ูุฏุชูุง 317 ุซุงููุฉ. ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉุ ูู ุงููุชููุน ุฃู ูุณุชุบุฑู ุงูุฃูุฑ ุญูุงูู 30 ุซุงููุฉ.

ูููู ูุจุฑูุงูุฌ Whisper ุฃูุถูุง ุงูุชูุจุค ุจู _timestamps_ ุนูู ูุณุชูู ุงููุทุงุนุงุช ููุจูุงูุงุช ุงูุตูุชูุฉ. ุชุดูุฑ ูุฐู ุงูุทูุงุจุน ุงูุฒูููุฉ ุฅูู ููุช ุงูุจุฏุก ูุงูุงูุชูุงุก ููุฑูุฑ ุตูุช ูุตูุฑุ ููู ูููุฏุฉ ุจุดูู ุฎุงุต ูููุงุกูุฉ ุงููุณุฎ ูุน ุงูุตูุช ุงููุฏุฎู. ูููุชุฑุถ ุฃููุง ูุฑูุฏ ุชูููุฑ ุชุฑุฌูุงุช ูุบููุฉ ูููุฏูู - ูุญุชุงุฌ ุฅูู ูุฐู ุงูุทูุงุจุน ุงูุฒูููุฉ ููุนุฑูุฉ ุฃู ุฌุฒุก ูู ุงููุณุฎ ุงูููุงุจูุฉ ููุทุนุฉ ูุนููุฉ ูู ุงูููุฏููุ ูู ุฃุฌู ุนุฑุถ ุงููุณุฎ ุงูุตุญูุญ ูุฐูู ุงูููุช.

ุชูุนูู ุงูุชูุจุค ุจุงูุทุงุจุน ุงูุฒููู ุจุณูุทุ ูุญุชุงุฌ ููุท ุฅูู ุชุนููู ุงูุญุฌุฉ `return_timestamps=True`. ุงูุทูุงุจุน ุงูุฒูููุฉ ูุชูุงููุฉ ูุน ูู ูู ุฃุณุงููุจ ุงูุชูุทูุน ูุงูุชุฌุฒุฆุฉ ุงูุชู ุงุณุชุฎุฏููุงูุง ุณุงุจููุงุ ูุฐุง ูููููุง ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุญุฌุฉ ุงูุทุงุจุน ุงูุฒููู ุฅูู ููุงููุชูุง ุงูุณุงุจูุฉ:

```python
pipe(
    long_audio,
    max_new_tokens=256,
    generate_kwargs={"task": "transcribe"},
    chunk_length_s=30,
    batch_size=8,
    return_timestamps=True,
)["chunks"]
```
**ุงููุงุชุฌ:**
```
[{'timestamp': (0.0, 26.4),
  'text': ' ุฅุฐุงู ุณุชูุฑุญ ุจุงูุฑุจุ ูุณุฃุฑูุนู ุฅูู ูุฑุชูุนุงุช ุงูุฃุฑุถุ ูุณุฃุนุทูู ุฃู ุชุฃูู ููุฑุงุซ ูุนููุจ ุฃุจููุ ูุฃู ูู ุงูุฑุจ ูุฏ ุชููู. ูุญู ุดูููุง. ูููุง ุถูููุง ูุซู ุงูุบููุ ูู ูุงุญุฏ ููุง ุงูุญุฑู ูู ุทุฑูููุ'},
 {'timestamp': (26.4, 32.48),
  'text': ' ููู ุงูุฑุจ ูุถุน ุนููู ุฅุซู ูู ูุงุญุฏ ููุง. ููุณ ุฃูู ุชูุณู ุฎุจุฒู ูุน'},
 {'timestamp': (32.48, 38.4),
  'text': ' ุงูุฌุงุฆุนุ ูุชุฌูุจ ุงููุดุฑุฏูู ุฅูู ุงูููุฒูุ ูุนูุฏูุง ุชุฑู ุงูุนุงุฑูุ ุชุบุทูู ููุง'},
 ...
```

ููุง ูู! ูุฏููุง ูุตูุง ุงููุชููุน ุจุงูุฅุถุงูุฉ ุฅูู ุงูุทูุงุจุน ุงูุฒูููุฉ ุงูููุงุจูุฉ.

## ููุฎุต

Whisper ูู ูููุฐุฌ ููู ูุณุจู ุงูุชุฏุฑูุจ ููุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ. ููุงุฑูุฉ ุจู Wav2Vec2ุ ููู ูุชูุชุน ุจุฏูุฉ ูุณุฎ ุฃุนููุ ูุน ูุฎุฑุฌุงุช ุชุญุชูู ุนูู ุนูุงูุงุช ุชุฑููู ูุญุฑูู ูุจูุฑุฉ. ูููู ุงุณุชุฎุฏุงูู ููุณุฎ ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุจุงูุฅุถุงูุฉ ุฅูู 96 ูุบุฉ ุฃุฎุฑูุ ุนูู ูู ูู ููุงุทุน ุงูุตูุช ุงููุตูุฑุฉ ูุงูุฃุทูู ูู ุฎูุงู _ุงูุชูุทูุน_. ุชุฌุนู ูุฐู ุงูุณูุงุช ููู ูููุฐุฌูุง ูุงุจููุง ููุชุทุจูู ููุนุฏูุฏ ูู ููุงู ุงูุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุงูุถุจุท ุงูุฏููู. ุชููุฑ ุทุฑููุฉ `pipeline()` ุทุฑููุฉ ุณููุฉ ูุชุดุบูู ุงูุงุณุชุฏูุงู ูู ููุงููุงุช ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุฐุงุช ุงูุณุทุฑ ุงููุงุญุฏ ูุน ุงูุชุญูู ูู ุงูุชูุจุคุงุช ุงููููุฏุฉ.

ูู ุญูู ุฃู ูููุฐุฌ Whisper ูุนูู ุจุดูู ุฌูุฏ ููุบุงูุฉ ุนูู ุงูุนุฏูุฏ ูู ุงููุบุงุช ุนุงููุฉ ุงูููุงุฑุฏุ ุฅูุง ุฃู ูุฏูู ุฏูุฉ ูุณุฎ ูุชุฑุฌูุฉ ุฃูู ุนูู ุงููุบุงุช ููุฎูุถุฉ ุงูููุงุฑุฏุ ุฃู ุชูู ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ุชุฏุฑูุจ ุฃูู ูุชุงุญุฉ ุจุณูููุฉ. ููุงู ุฃูุถูุง ุฃุฏุงุก ูุชุบูุฑ ุนุจุฑ ููุฌุงุช ูุงุฎุชูุงูุงุช ูุนููุฉ ูู ุจุนุถ ุงููุบุงุชุ ุจูุง ูู ุฐูู ุฏูุฉ ุฃูู ูููุชููููู ูู ุฃุฌูุงุณ ูุฃุนุฑุงู ูุฃุนูุงุฑ ุฃู ูุนุงููุฑ ุฏูููุบุฑุงููุฉ ูุฎุชููุฉ (_c.f._ [ูุฑูุฉ Whisper](https://arxiv.org/pdf/2212.04356.pdf)).

ูุชุญุณูู ุงูุฃุฏุงุก ุนูู ุงููุบุงุช ููุฎูุถุฉ ุงูููุงุฑุฏ ุฃู ุงูููุฌุงุช ุฃู ุงูุงุฎุชูุงูุงุชุ ูููููุง ุฃุฎุฐ ูููุฐุฌ Whisper ุงููุฏุฑุจ ูุณุจููุง ูุชุฏุฑูุจู ุนูู ูุฌููุนุฉ ุจูุงูุงุช ุตุบูุฑุฉ ูู ุงูุจูุงูุงุช ุงููุฎุชุงุฑุฉ ุจุดูู ููุงุณุจุ ูู ุนูููุฉ ุชุณูู _ุงูุถุจุท ุงูุฏููู_. ุณููุธูุฑ ุฃูู ูุน ุงููููู ูู ุนุดุฑ ุณุงุนุงุช ูู ุงูุจูุงูุงุช ุงูุฅุถุงููุฉุ ูููููุง ุชุญุณูู ุฃุฏุงุก ูููุฐุฌ Whisper ุจุฃูุซุฑ ูู 100ูช ุนูู ูุบุฉ ููุฎูุถุฉ ุงูููุงุฑุฏ. ูู ุงููุณู ุงูุชุงููุ ุณูุบุทู ุงูุนูููุฉ ูุฑุงุก ุงุฎุชูุงุฑ ูุฌููุนุฉ ุจูุงูุงุช ููุถุจุท ุงูุฏููู.